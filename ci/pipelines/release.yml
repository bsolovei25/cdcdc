---
tst:
  extends: .generate-docker-files-tpl
  stage: test
  dependencies: []
  script:
    - env
    - echo $REF
    - echo "front artifacts" > front-art.txt
    - echo "$REF" >> front-art.txt
  rules:
    - if: $CI_PIPELINE_SOURCE == "pipeline"

generate-artifacts:
  extends: .generate-docker-files-tpl
  stage: release
  dependencies: []
  needs:
    - job: tst
      artifacts: false
  script:
    - env
    - echo $REF
    - echo "front artifacts" > front-art.txt
    - echo "$REF" >> front-art.txt
  artifacts:
    expire_in: 3 hrs
    paths:
      - ./front-art.txt
  rules:
    - if: $CI_PIPELINE_SOURCE == "pipeline"
