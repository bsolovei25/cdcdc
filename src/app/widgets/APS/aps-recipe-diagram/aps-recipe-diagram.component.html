<div class="container pointer-event">
  <evj-aps-widget-header [uniqId]="uniqId" [widgetTitle]="widgetTitle" icon="map">
    <div
      class="content-container"
      (mousedown)="$event.stopPropagation()"
      (touchstart)="$event.stopPropagation()"
    ></div>
  </evj-aps-widget-header>

  <div
    class="container-body"
    (mousedown)="$event.stopPropagation()"
    (touchstart)="$event.stopPropagation()"
  >
    <div class="container">
      <table class="table">
        <thead class="table__header">
          <tr class="table__header__row">
            <th *ngFor="let column of columnsToDisplay" class="table__header__column">
              {{column.name === 'productName' ? '' : column.name}}
            </th>
          </tr>
        </thead>
        <tbody class="table__body">
          <ng-container *ngFor="let element of dataSource">
            <tr
              class="table__body__row"
              [class.last-tr]="element.productName === 'last-row'"
              [class.table__body__row--active]="selectedRowProduct === element.id"
            >
              <ng-container *ngIf="element.productName !== 'last-row'">
                <td
                  *ngFor="let column of columnsToDisplay"
                  class="table__body__column"
                  [class.table__body__column--active]="selectedRowProduct === element.id"
                >
                  <div
                    *ngIf="column.name === 'productName'"
                    class="table__body__column__row-title"
                    [class.table__body__column__row-title__border-active]="selectedRowProduct === element.id"
                  >
                    <svg-icon
                      class="table__body__column__row-title__icon"
                      [class.table__body__column__row-title__icon--active]="selectedRowProduct === element.id"
                      src="assets/icons/widgets/APS/aps-gantt-chart/plus.svg"
                    >
                    </svg-icon>
                    <svg-icon
                      *ngIf="selectedRowProduct === element.id; else elseBlock"
                      class="table__body__column__row-title__icon__background"
                      src="assets/icons/widgets/APS/aps-gantt-chart/gradient-product-blue.svg"
                    >
                    </svg-icon>
                    <ng-template #elseBlock>
                      <svg-icon
                        class="table__body__column__row-title__icon__background"
                        src="assets/icons/widgets/APS/aps-gantt-chart/gradient-product-grey.svg"
                      >
                      </svg-icon
                    ></ng-template>
                    <span class="table__body__column__row-title__text"
                      >{{ element.productName }}
                    </span>
                    <div class="table__body__column__row-title__value__texts">
                      <div class="table__body__column__row-title__value__text">
                        {{ element.productValue }}
                      </div>
                      <div class="table__body__column__row-title__value__text--orange">
                        {{ element.productDeviation }}
                      </div>
                    </div>
                    <svg-icon
                      src="assets/icons/widgets/APS/aps-gantt-chart/product-value.svg"
                      class="table__body__column__row-title__value__background"
                    >
                    </svg-icon>
                  </div>
                  <div *ngIf="column.name !== 'productName'" class="line">
                    {{element.productDeviation }}
                  </div>
                </td>
              </ng-container>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>
