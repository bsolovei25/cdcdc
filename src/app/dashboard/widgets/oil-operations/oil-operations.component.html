<evj-widget-preview [title]="widgetTitle" [icon]="widgetIcon" [previewTitle]="" *ngIf="isMock">
</evj-widget-preview>

<ng-container *ngIf="!isMock">
    <div class="container">
        <evj-widget-header [title]="widgetTitle" [units]="widgetUnits" [code]="widgetCode" [id]="widgetId"
            [uniqId]="widgetUniqId" [widgetType]="widgetType"></evj-widget-header>
        <evj-frame-top></evj-frame-top>
        <div class="body-container" (mousedown)="$event.stopPropagation()" (touchstart)="$event.stopPropagation()">
            <div class="block">
                <div class='left-side'>
                    <evj-table-grid [scrollLeft]="true" [data]="data.tableLeft" [search]="true" [activeFilter]="isFilter" [filter]="true"
                        (clickFilter)="openFilter($event)">
                        <evj-column-grid key="number" name="№" [width]="7"></evj-column-grid>
                        <evj-column-grid key="rR" name="Р-р" [width]="7"></evj-column-grid>
                        <evj-column-grid key="product" name="Продукт" [width]="20">
                        </evj-column-grid>
                        <evj-column-grid key="pasport" name="Паспорт" [width]="13" [template]="pasport">
                            <ng-template #pasport let-data="data">
                                <div class="pasport">
                                    <div class="pasport__icon">
                                        <svg-icon src="assets/icons/widgets/oil-control-all/quality-docs-panel/pdf.svg"
                                        [svgStyle]="{ 'width.px':40, 'height.px':40, 'padding.px': 5 }"></svg-icon>
                                    </div>
                                    <div class="pasport__name"> {{ data.pasport }} </div>
                                </div>
                            </ng-template>
                        </evj-column-grid>
                        <evj-column-grid key="dateFrom" name="Дата начала" [width]="13"></evj-column-grid>
                        <evj-column-grid key="dateTo" name="Дата окончания" [width]="14"></evj-column-grid>
                        <evj-column-grid key="mass" name="Масса" [width]="7"></evj-column-grid>
                        <evj-column-grid key="deviation" name="Отклонение" [width]="11"></evj-column-grid>
                        <evj-column-grid key="status" name="Статус" [width]="6" [template]="status">
                            <ng-template #status let-data="data">
                                <div class="status">
                                    <div class="pasport__icon">
                                        <svg-icon src="assets/icons/widgets/oil-control-all/oil-operations/libra-red.svg"
                                        [svgStyle]="{ 'width.px':30, 'height.px':30, 'margin-top.px': 5 }"></svg-icon>
                                    </div>
                                </div>
                            </ng-template>
                        </evj-column-grid>
                    </evj-table-grid>
                </div>
                <div class='middle-side'>
                    <div class='middle-side__top'>
                        <evj-oil-operations-received-operations [data]="data.received" [isFilterOpen]="isTankFilter"
                            (openFilterTank)="openFilterTank($event)">
                        </evj-oil-operations-received-operations>
                    </div>
                    <div class='middle-side__bottom'>
                        <evj-oil-operations-shipment-formation [data]="data.shipment">
                        </evj-oil-operations-shipment-formation>
                    </div>
                </div>
                <div class='right-side'>
                    <evj-table-grid [data]="data.tableRight">
                        <evj-column-grid key="direction" name="Направление" [width]="23" [template]="direction">
                            <ng-template #direction let-data="data">
                                <div class="direction">
                                    <div class="direction__icon">
                                        <svg-icon src="assets/icons/widgets/oil-control-all/oil-operations/background-pic.svg"
                                        [svgStyle]="{ 'width.px':65, 'height.px':40, 'margin-top.px': 5 }"></svg-icon>
                                        <img src="./assets/pic/Icons3D/Cistern.png" class="icon-cistern">
                                    </div>
                                    <div class="direction__name"> {{ data.direction }} </div>
                                </div>
                            </ng-template>
                        </evj-column-grid>
                        <evj-column-grid key="rRRiser" name="Р-р/Стояк" [width]="11"></evj-column-grid>
                        <evj-column-grid key="dok" name="Док. №" [width]="8">
                        </evj-column-grid>
                        <evj-column-grid key="mass" name="Масса" [width]="8"></evj-column-grid>
                        <evj-column-grid key="pasport" name="Паспорт" [width]="13" [template]="pasport">
                            <ng-template #pasport let-data="data">
                                <div class="pasport">
                                    <div class="pasport__icon">
                                        <svg-icon src="assets/icons/widgets/oil-control-all/quality-docs-panel/pdf.svg"
                                        [svgStyle]="{ 'width.px':40, 'height.px':40, 'padding.px': 5 }"></svg-icon>
                                    </div>
                                    <div class="pasport__name"> {{ data.pasport }} </div>
                                </div>
                            </ng-template>
                        </evj-column-grid>
                        <evj-column-grid key="shipment" name="Отгружено" [width]="8"></evj-column-grid>
                        <evj-column-grid key="note" name="Примечание" [width]="25"></evj-column-grid>
                    </evj-table-grid>
                </div>
            </div>

            <div *ngIf="isFilter">
                <evj-oil-operations-filter [data]="data.filter" (closeFilter)="openFilter($event)">
                </evj-oil-operations-filter>
            </div>
            <div *ngIf="isTankFilter">
                <evj-oil-operations-tank-filter [data]="data.filterTanks" (closeFilterTank)="openFilterTank($event)">
                </evj-oil-operations-tank-filter>
            </div>
        </div>
        <evj-frame-bottom></evj-frame-bottom>
    </div>
</ng-container>