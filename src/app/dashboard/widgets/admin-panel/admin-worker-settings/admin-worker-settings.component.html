<div class="admin">
  <div class="admin__header">
    <div class="header__search">
      <div class="search">
        <evj-input
          class="insert-component"
          [placeholder]="'Введите название пункта'"
          [iconSrc]="searchIcon"
          (inputedValue)="onSearchField($event)"
        ></evj-input>
      </div>
    </div>
    <div class="header__title">
      <div class="line"></div>
      <div class="title">Информация о сотруднике</div>
      <div class="line"></div>
    </div>
    <div class="header__search">
      <div class="search">
        <evj-input
          class="insert-component"
          [placeholder]="'Введите название рабочей области'"
          [iconSrc]="searchIcon"
          (inputedValue)="onSearchWorkspace($event)"
        ></evj-input>
      </div>
    </div>
  </div>
  <div class="admin__worker">
    <div class="worker__column worker__info">
      <div class="options scroll-bar">
        <ng-container *ngFor="let option of inputOptions">
          <evj-aws-card
            class="card"
            *ngIf="isValidFieldName(option.name)"
            [option]="option"
            (saveChanging)="onFieldChanging($event)"
          ></evj-aws-card>
        </ng-container>

        <evj-aws-select-card
          class="card"
          [option]="selectOptions[0]"
          (saveChanging)="onSelectUnit($event)"
        ></evj-aws-select-card>
        <evj-aws-select-card
          class="card"
          *ngIf="!!workerUnit"
          [option]="selectOptions[1]"
          (saveChanging)="onSelectBrigade($event)"
        ></evj-aws-select-card>

        <evj-aws-checkbox-card
          class="card"
          (checked)="onSetResponsible($event)"
        ></evj-aws-checkbox-card>
      </div>
      <div class="claims">
        <div class="title">Права доступа</div>
        <div
          class="card"
          [ngClass]="{'card-active':isClaimsShowing}"
          (click)="isClaimsShowing=true"
        >
          Права
        </div>
        <div
          class="card"
          [ngClass]="{'card-active':!isClaimsShowing}"
          (click)="isClaimsShowing=false"
        >
          Доступные рабочие области
        </div>
      </div>
      <div class="block" *ngIf="!isCreateNewUser">
        <evj-aws-block
          class="block__component"
          [isLockedUser]="false"
          (changeLockUser)="onChangeLockWorker()"
        ></evj-aws-block>
      </div>
    </div>
    <div class="worker__column worker__main">
      <div class="avatar">
        <div class="frame" [ngClass]="{'frame-moved':isAlertShowing}">
          <img [src]="returnPhotoPath()" class="photo" />
        </div>
        <div class="alert" [ngClass]="{'alert-hidden':!isAlertShowing}">
          <div
            class="checkbox"
            [ngClass]="{'checkbox-active':isCheckBoxClicked}"
            (click)="isCheckBoxClicked=!isCheckBoxClicked"
          ></div>
          <div class="message">
            Подтверждаю внесенные изменения и<br />
            <span>высокий уровень</span> доступа<br />
            для данного сотрудника
          </div>
        </div>
      </div>
      <div class="buttons">
        <evj-button class="button" [textButton]="'Вернуться'" (click)="onReturn()"></evj-button>
        <evj-button
          class="button"
          [textButton]="'Сохранить'"
          [ngClass]="{'button-disabled':!isCheckBoxClicked}"
          (click)="onSave()"
        ></evj-button>
      </div>
    </div>
    <div class="worker__column worker__workspaces scroll-bar" *ngIf="!isClaimsShowing">
      <div class="cards">
        <ng-container *ngFor="let workspace of allWorkspaces">
          <evj-aws-workspace-card
            *ngIf="isValidWorkspaceName(workspace.screenName)"
            [isActive]="defineIsWorkspaceActive(workspace)"
            [screenId]="defineWorkerScreenId(workspace)"
            [workspace]="workspace"
            [isChangingCardState]="true"
            (selectedWorkspace)="onSelectWorkspace($event)"
            (selectedWorkspaceClaims)="onSelectWorkspaceClaims($event)"
          ></evj-aws-workspace-card>
        </ng-container>
      </div>
    </div>
    <div class="worker__column worker__claims scroll-bar" *ngIf="isClaimsShowing">
      <div class="title">Права</div>
      <div class="cards">
        <evj-aws-claim-card
          [name]="'Высокий уровень доступа'"
          [isActive]="false"
          [isChangingCardState]="true"
          (click)="onSelectClaim()"
        ></evj-aws-claim-card>
        <evj-aws-claim-card
          [name]="'Открытый доступ'"
          [isActive]="true"
          [isChangingCardState]="true"
        ></evj-aws-claim-card>
        <evj-aws-claim-card
          [name]="'Доступ с ограничениями'"
          [isActive]="false"
          [isChangingCardState]="true"
          (click)="onSelectClaim()"
        ></evj-aws-claim-card>
      </div>
    </div>
  </div>
</div>
