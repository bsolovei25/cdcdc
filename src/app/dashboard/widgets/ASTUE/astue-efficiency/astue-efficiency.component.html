<evj-widget-preview [title]="widgetTitle" [icon]="widgetIcon" *ngIf="isMock"></evj-widget-preview>

<div class="container pointer-events" *ngIf="!isMock">
  <evj-widget-header
    [title]="widgetTitle"
    [widgetType]="widgetType"
    [units]="widgetUnits"
    [code]="widgetCode"
    [id]="widgetId"
    [uniqId]="widgetUniqId"
    [(toggleAstue)]="isInitialDataShow"
  ></evj-widget-header>
  <evj-frame-top></evj-frame-top>

  <div
    class="content-container"
    (mousedown)="$event.stopPropagation()"
    (touchstart)="$event.stopPropagation()"
  >
    <ng-container *ngIf="isInitialDataShow">
      <div class="item item_s">
        <evj-astue-efficiency-items
          [data]="data"
          (selectProduct)="onSelectProduct($event)"
        ></evj-astue-efficiency-items>
      </div>
      <div class="item item_s">
        <evj-astue-efficiency-units
          [isInitialDataShow]="isInitialDataShow"
          [units]="selection.selected[0].units"
        ></evj-astue-efficiency-units>
      </div>
      <ng-container *ngIf="isGraphDisplay; else table">
        <div class="item item_l">
          <evj-astue-efficiency-graph-display
            (toggleDisplay)="toggleDisplay($event)"
          ></evj-astue-efficiency-graph-display>
        </div>
        <div class="item item_m">
          <evj-astue-efficiency-initial-data></evj-astue-efficiency-initial-data>
        </div>
      </ng-container>
      <ng-template #table>
        <div class="item item_xl">
          <evj-astue-efficiency-table-display
            [isInitialDataShow]="isInitialDataShow"
            (toggleDisplay)="toggleDisplay($event)"
          ></evj-astue-efficiency-table-display>
        </div>
      </ng-template>
    </ng-container>

    <ng-container *ngIf="!isInitialDataShow">
      <div class="block">
        <div class="block__items">
          <div class="item item_s">
            <evj-astue-efficiency-items></evj-astue-efficiency-items>
          </div>
          <div class="item item_s">
            <evj-astue-efficiency-units
              [isInitialDataShow]="isInitialDataShow"
            ></evj-astue-efficiency-units>
          </div>
        </div>
        <div class="calculation">
          <evj-astue-efficiency-calculation></evj-astue-efficiency-calculation>
        </div>
      </div>
      <div class="item item_xl">
        <evj-astue-efficiency-table-display
          [isInitialDataShow]="isInitialDataShow"
        ></evj-astue-efficiency-table-display>
      </div>
    </ng-container>
  </div>

  <evj-frame-bottom></evj-frame-bottom>
</div>
