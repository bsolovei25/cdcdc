<evj-widget-preview
  [title]="widgetTitle"
  [previewTitle]="widgetType"
  *ngIf="isMock"
></evj-widget-preview>

<div class="container pointer-event" *ngIf="!isMock">
  <evj-widget-header
    [title]="widgetTitle"
    [units]="widgetUnits"
    [code]="widgetCode"
    [id]="id"
    [uniqId]="uniqId"
    [icon]="widgetIcon"
  ></evj-widget-header>

  <evj-frame-top></evj-frame-top>
  <div
    class="content"
    (mousedown)="$event.stopPropagation()"
    (touchstart)="$event.stopPropagation()"
  >
    <div class="workflow" >
      <div class="workflow__choose-scenario">
        <div class="choose-system">
          <div class="choose-system__title">Выбор системы</div>
          <div class="choose-system__body">
            <div class="choose-system__body__select">
              <mat-form-field class="choose-system__body__select_selectbox">
                <mat-select
                  panelClass="mat-select-custom"
                  [(ngModel)]="item"
                  (selectionChange)="chooseSystem(item)"
                >
                  <mat-option *ngFor="let p of [1]" [value]="p.type">Таблицы</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="available-scenario">
          <div class="available-scenario__title">Доступные сценарии</div>
          <svg-icon
            class="available-scenario__icon"
            src="./assets/icons/widgets/workflow/add_btn.svg"
            [svgStyle]="{ 'width.px': 30, 'height.px': 30 }"
          ></svg-icon>
          <div class="available-scenario__body">
            <div class="available-scenario__body__items">
              <div class="available-scenario__body__item">
                <span
                  class="available-scenario__body__item__text"
                  [class.available-scenario__body__item__text--active]="true"
                  >новый сценарий</span
                >
                <div class="available-scenario__body__item__container">
                  <div
                    class="available-scenario__body__item__container__edit-block"
                    [class.available-scenario__body__item__container__edit-block--active]="true"
                  >
                    <svg-icon
                      class="available-scenario__body__item__container__edit-block__edit"
                      src="./assets/icons/widgets/workflow/edit_w.svg"
                      [svgStyle]="{ 'width.px':30, 'height.px':30 }"
                    ></svg-icon>
                    <div
                      class="available-scenario__body__item__container__edit-block__delete-block"
                    >
                      <div
                        class="available-scenario__body__item__container__edit-block__delete-block__delete"
                      ></div>
                    </div>
                  </div>
                  <div class="available-scenario__body__item__container__icon">
                    <svg-icon
                      src="./assets/icons/widgets/workflow/play_w.svg"
                      [svgStyle]="{ 'width.px':15, 'height.px':15 }"
                    ></svg-icon>
                    <svg-icon
                      *ngIf="false"
                      src="./assets/icons/widgets/workflow/stop_w.svg"
                      [svgStyle]="{ 'width.px':15, 'height.px':15 }"
                    ></svg-icon>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="workflow__action">
        <div class="workflow__action__title">Доступные виджеты</div>
        <div class="workflow__action__body">
          <div
            class="workflow__action__body__items"
            (cdkDropListDropped)="onDrop($event)"
            cdkDropList
            #todoList="cdkDropList"
          >
            <div class="workflow__action__body__item" id="error" draggable="true" #done>
              <svg-icon
                class="workflow__action__body__item__icon"
                src="./assets/icons/widgets/workflow/expired.svg"
                [svgStyle]="{ 'width.px':32, 'height.px':32 }"
                id="done"
              ></svg-icon>
              <span class="workflow__action__body__item__title">Просрочено</span>
            </div>
            <div class="workflow__action__body__item" cdkDrag>
              <svg-icon
                class="workflow__action__body__item__icon"
                src="./assets/icons/widgets/workflow/done.svg"
                [svgStyle]="{ 'width.px':32, 'height.px':32 }"
                id="done"
              ></svg-icon>
              <span class="workflow__action__body__item__title">Выполнено</span>
            </div>
            <div
              class="workflow__action__body__item"
              id="draggableSpan"
              draggable="true"
              (dragstart)="onDragStart($event)"
            >
              <svg-icon
                class="workflow__action__body__item__icon"
                src="./assets/icons/widgets/workflow/warning_bell.svg"
                [svgStyle]="{ 'width.px':32, 'height.px':32 }"
                id="done"
              ></svg-icon>
              <span class="workflow__action__body__item__title">Подходит к концу</span>
            </div>
            <div class="workflow__action__body__item">
              <svg-icon
                class="workflow__action__body__item__icon"
                src="./assets/icons/widgets/workflow/message_w.svg"
                [svgStyle]="{ 'width.px':32, 'height.px':32 }"
                id="done"
              ></svg-icon>
              <span class="workflow__action__body__item__title"
                >Отправить сообщение ответственному</span
              >
            </div>
            <div (dragover)="drop($event)" draggable="true" #dragger class="workflow__action__body__item">
              <svg-icon
                class="workflow__action__body__item__icon"
                src="./assets/icons/widgets/workflow/users_w.svg"
                [svgStyle]="{ 'width.px':32, 'height.px':32 }"
                id="done"
              ></svg-icon>
              <span class="workflow__action__body__item__title"
                >Отправить сообщение пользователям</span
              >
            </div>
          </div>
        </div>
      </div>
      <div class="workflow__scenario">
        <div class="workflow__scenario__title">Сценарий</div>
        <div class="workflow__scenario__body" #containerWorkflow>
          <div
            class="workflow__scenario__body__top"
            #splitTop
            (cdkDropListDropped)="onDrop($event)"
            cdkDropList
          ></div>
          <div class="workflow__scenario__body__bar" #splitBar></div>
          <div class="workflow__scenario__body__bottom" #dropped (dragover)="drop($event)">
            dddddddddddddddd
          </div>
        </div>
      </div>
    </div>
  </div>

  <evj-frame-bottom></evj-frame-bottom>
</div>
