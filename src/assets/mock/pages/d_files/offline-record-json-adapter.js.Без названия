/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require,a){"use strict";var b=require("../services/offline-record-dto"),c=require("../services/field-info"),d=require("system/lang/converter");function e(){}return e.fromJson=function a(c){var e=new b;if(c)return e.clientId=c.clientID?d.toString(c.clientID):d.toString(c.clientId),e.entityKey=d.toString(c.entityKey),e.entityId=d.toString(c.entityId),e.fieldValues=this.adaptFieldValues(c.fieldValues),e.isDone=d.toNullableBoolean(c.isDone),e},e.fromJsonCollection=function a(b){var c=[],d;if(!b)return c;for(d=0;d<b.length;d++)c.push(e.fromJson(b[d]));return c},e.adaptFieldValues=function a(b){if(!b)return[];if(0===b.length)return[];for(var d=[],e=0;e<b.length;e++){var f=new c(b[e]);d.push(f)}return d},e.toServerObject=function a(b){var c=b;c.fieldValues=this.adaptFieldValuesForServer(b.fieldValues);for(var d=0;d<c.relatedRecords.length;d++)for(var e=c.relatedRecords[d],f=0;f<Object.keys(e.records).length;f++){var g=e.records[Object.keys(e.records)[f]]
;g=this.toServerObject(g)}return c},e.adaptFieldValuesForServer=function a(b){for(var c=[],d=0;d<b.length;d++){var e={dataType:b[d].fieldType,id:b[d].fieldID,defaultValue:b[d].defaultValue,value:b[d].value,values:b[d].values};c.push(e)}return c},e});