/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("knockout"),b=require("./widget-editor"),c=require("system/ui/message-box"),d=require("catalog/catalog-dialog"),e=require("../views/chart-widget-editor-view");require("ui/elements/localize/localize-element");function f(a){g.call(this,a,e.html),this.editorView=Object.resolve(e),this.backup.path=this.kom.observable(),this.catalogDialog=Object.resolve(d)}var g=Object.inherit(b,f);f.prototype.afterLoad=function(){try{j(this)}catch(a){g.prototype.onError.call(this,a)}},f.prototype.afterSave=function(){try{k(this)}catch(a){g.prototype.onError.call(this,a)}},f.prototype.afterCancel=function(){try{l(this)}catch(a){g.prototype.onError.call(this,a)}},f.prototype.afterAttach=function(a){try{this.editorView.attach(a),Element.upgrade(a.element.querySelectorAll("mi-localize")),g.prototype.handleRequiredFields.call(this,this.widgetVM.path)}catch(a){g.prototype.onError.call(this,a)}},f.prototype.afterDetach=function(){try{this.editorView.detach()
}catch(a){g.prototype.onError.call(this,a)}},f.prototype.choosePathFromCatalog=function(){try{this.catalogDialog.show({path:this.widgetVM.path(),itemTypes:["Graph"]}).done(h.bind(null,this)).fail(i.bind(null,this))}catch(a){g.prototype.onError.call(this,a)}};function h(a,b){var c=a.widgetVM.translator.translate("CHART_WIDGET");a.widgetVM.path(b.path),a.widgetVM.widget.name(b.id)}function i(a,b){if("cancelled"!==b)throw new Error("Unable to retrieve catalog item because: "+b)}function j(a){a.backup.path(a.widgetVM.path())}function k(a){a.backup.path()}function l(a){a.widgetVM.path(a.backup.path())}return f});