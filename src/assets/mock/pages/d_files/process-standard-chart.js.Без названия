/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("ramda"),b=require("ui/elements/chart/chart-utilities"),c=require("system/text/parser"),d=require("application/application-context");function e(){}e.processData=function(a,c,d,e,g,h,i,j){var k,l,m,n,o,p,q,r,s={},t=c.chartData,u=c.categoryArray;for(k=0;k<e.length;k++){if(l=b.getRowValueFromQuery(g,e,k),r=b.getRowValueFromQuery(g,i,0),o=b.getFormattedValueFromQuery(d,g,e,k),n=b.extractHyperlinkHref(g,h,k),q=b.extractHyperlinkHref(g,e,k),m=a.chartUtilities.translateChartType(d.series[k].chartType),p=b.extractHyperlinkHref(g,i,0),s[d.categoryProperty]=b.getFormattedValueFromQuery(d,g,i,0),s[d.categoryProperty]=b.formatHyperlink(s[d.categoryProperty],p),"stock"===m||"stock-area"===m||"stacked-stock"===m)f(d,u,r,t,n,o,m,l,k);else{var v={y:l,url:n?n:""};o&&(v.y=b.setYValueFromFormatted(l,o),v.formattedValue=o),t[k]?t[k].data[t[k].data.length]=v:t[k]={type:m,data:[v],name:b.extractChartName(d,j,e,k),color:d.series[k].color,
yAxis:d.series[k].yAxis}}s[b.extractChartName(d,j,e,k)]=b.formatHyperlink(o,q)}c.gridData.data[c.gridData.data.length]=s};function f(a,b,c,d,e,f,i,j,k){void 0!==b[b.length-1]&&""!==b[b.length-1]&&null!==b[b.length-1]&&(d[k]?d[k].data[d[k].data.length]={x:h(c),y:Number(g(j)),formattedValue:f?f:"",url:e?e:""}:d[k]={type:i,data:[{x:h(c),y:Number(g(j)),formattedValue:f?f:"",url:e?e:""}],name:a.series[k].name,color:a.series[k].color,yAxis:a.series[k].yAxis})}function g(a){var b=c.parseFloat(a);return isNaN(b)?null:Number(b)}function h(a){return Date.parse(a)}return e});