var m=function a(b,c){"use strict";function e(a){return"function"==typeof a}function f(a){return"[object Object]"===i.call(a)}function g(a){return"[object String]"===i.call(a)}function r(a){n=a.document,o=a.location,q=a.cancelAnimationFrame||a.clearTimeout,p=a.requestAnimationFrame||a.setTimeout}function s(a,b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(f(a))return wb(a,c);var n,e=null!=b&&f(b)&&!("tag"in b||"view"in b||"subtree"in b),i=e?b:{},l="class"in i?"class":"className",m={tag:"div",attrs:{}},o=[];if(!g(a))throw new Error("selector in m(selector, attrs, children) should be a string");for(;null!=(n=j.exec(a));)if(""===n[1]&&n[2])m.tag=n[2];else if("#"===n[1])m.attrs.id=n[2];else if("."===n[1])o.push(n[2]);else if("["===n[3][0]){var p=k.exec(n[3]);m.attrs[p[1]]=p[3]||(p[2]?"":!0)}var q=e?c.slice(1):c;m.children=1===q.length&&h(q[0])?q[0]:q;for(var r in i)i.hasOwnProperty(r)&&(r===l&&null!=i[r]&&""!==i[r]?(o.push(i[r]),m.attrs[r]=""):m.attrs[r]=i[r]);return o.length&&(m.attrs[l]=o.join(" ")),m}function t(a,b){for(var c=0;c<a.length&&!b(a[c],c++););}function u(a,b){t(a,function(a,c){return(a=a&&a.attrs)&&null!=a.key&&b(a,c)})}function v(a){try{if(null==a||null==a.toString())return""}catch(b){return""}return a}function w(a,b,c,d){try{y(a,b,c),b.nodeValue=d}catch(e){}}function x(a){for(var b=0;b<a.length;b++)h(a[b])&&(a=a.concat.apply([],a),b--);return a}function y(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function C(a,b,c,d){u(a,function(a,d){b[a=a.key]=b[a]?{action:B,index:d,from:b[a].index,element:c.nodes[b[a].index]||n.createElement("div")}:{action:A,index:d}});var e=[];for(var f in b)e.push(b[f]);var g=e.sort(_),h=new Array(c.length);return h.nodes=c.nodes.slice(),t(g,function(b){var e=b.index;if(b.action===z&&(bb(c[e].nodes,c[e]),h.splice(e,1)),b.action===A){var f=n.createElement("div");f.key=a[e].attrs.key,y(d,f,e),h.splice(e,0,{attrs:{key:a[e].attrs.key},nodes:[f]}),h.nodes[e]=f}if(b.action===B){var g=b.element,i=d.childNodes[e];i!==g&&null!==g&&d.insertBefore(g,i||null),h[e]=c[b.from],h.nodes[e]=g}}),h}function D(a,b,c,d){var e=a.length!==b.length;return e||u(a,function(a,c){var d=b[c];return e=d&&d.attrs&&d.attrs.key!==a.key}),e?C(a,c,b,d):b}function E(a,b,c){t(a,function(a,d){null!=b[d]&&c.push.apply(c,b[d].nodes)}),t(b.nodes,function(a,d){null!=a.parentNode&&c.indexOf(a)<0&&bb([a],[b[d]])}),a.length<b.length&&(b.length=a.length),b.nodes=c}function F(a){var b=0;u(a,function(){return t(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+b++)}),1})}function G(a,b,c){(a.tag!==b.tag||c.sort().join()!==Object.keys(b.attrs).sort().join()||a.attrs.id!==b.attrs.id||a.attrs.key!==b.attrs.key||"all"===s.redraw.strategy()&&(!b.configContext||b.configContext.retain!==!0)||"diff"===s.redraw.strategy()&&b.configContext&&b.configContext.retain===!1)&&(b.nodes.length&&bb(b.nodes),b.configContext&&e(b.configContext.onunload)&&b.configContext.onunload(),b.controllers&&t(b.controllers,function(a){a.unload&&a.onunload({preventDefault:m})}))}function H(a,b){return a.attrs.xmlns?a.attrs.xmlns:"svg"===a.tag?"http://www.w3.org/2000/svg":"math"===a.tag?"http://www.w3.org/1998/Math/MathML":b}function I(a,b,c){c.length&&(a.views=b,a.controllers=c,t(c,function(a){if(a.onunload&&a.onunload.$old&&(a.onunload=a.onunload.$old),Bb&&a.onunload){var b=a.onunload;a.onunload=m,a.onunload.$old=b}}))}function J(a,b,c,d,f){if(e(b.attrs.config)){var g=f.configContext=f.configContext||{};a.push(function(){return b.attrs.config.call(b,c,!d,g,f)})}}function K(a,b,d,e,f,g,h,i){var j=a.nodes[0];return e&&ab(j,b.tag,b.attrs,a.attrs,f),a.children=$(j,b.tag,c,c,b.children,a.children,!1,0,b.attrs.contenteditable?j:d,f,h),a.nodes.intact=!0,i.length&&(a.views=g,a.controllers=i),j}function L(a,b,c){var d;a.$trusted?d=eb(b,c,a):(d=[n.createTextNode(a)],b.nodeName.match(l)||y(b,d[0],c));var e="string"==typeof a||"number"==typeof a||"boolean"==typeof a?new a.constructor(a):a;return e.nodes=d,e}function M(a,b,c,d,e,f){var g=b.nodes;return d&&d===n.activeElement||(a.$trusted?(bb(g,b),g=eb(c,e,a)):"textarea"===f?c.value=a:d?d.innerHTML=a:((1===g[0].nodeType||g.length>1)&&(bb(b.nodes,b),g=[n.createTextNode(a)]),w(c,g[0],e,a))),b=new a.constructor(a),b.nodes=g,b}function N(a,b,c,d,e,f,g){return 0===a.nodes.length?L(b,d,c):a.valueOf()!==b.valueOf()||e===!0?M(b,a,d,f,c,g):(a.nodes.intact=!0,a)}function O(a){if(a.$trusted){var b=a.match(/<[^\/]|\>\s*[^<]/g);if(null!=b)return b.length}else if(h(a))return a.length;return 1}function P(a,b,d,e,f,g,h,i,j){a=x(a);var k=[],l=b.length===a.length,m=0,n={},o=!1;u(b,function(a,c){o=!0,n[b[c].attrs.key]={action:z,index:c}}),F(a),o&&(b=D(a,b,n,d));for(var p=0,q=0,r=a.length;r>q;q++){var s=$(d,f,b,e,a[q],b[p],g,e+m||m,h,i,j);s!==c&&(l=l&&s.nodes.intact,m+=O(s),b[p++]=s)}return l||E(a,b,k),b}function Q(a,b,c,d,e){if(null!=b){if(i.call(b)===i.call(a))return b;if(e&&e.nodes){var f=c-d,g=f+(h(a)?a:b.nodes).length;bb(e.nodes.slice(f,g),e.slice(f,g))}else b.nodes&&bb(b.nodes,b)}return b=new a.constructor,b.tag&&(b={}),b.nodes=[],b}function R(a,b){return b===c?a.attrs.is?n.createElement(a.tag,a.attrs.is):n.createElement(a.tag):a.attrs.is?n.createElementNS(b,a.tag,a.attrs.is):n.createElementNS(b,a.tag)}function S(a,b,c,d){return d?ab(b,a.tag,a.attrs,{},c):a.attrs}function T(a,b,d,e,f,g){return null!=a.children&&a.children.length>0?$(b,a.tag,c,c,a.children,d.children,!0,0,a.attrs.contenteditable?b:e,f,g):a.children}function U(a,b,c,d,e,f,g){var h={tag:a.tag,attrs:b,children:c,nodes:[d]};return I(h,f,g),h.children&&!h.children.nodes&&(h.children.nodes=[]),"select"===a.tag&&"value"in a.attrs&&ab(d,a.tag,{value:a.attrs.value},{},e),h}function V(a,b,c,d){var e="diff"===s.redraw.strategy()&&a?a.indexOf(b):-1;return e>-1?c[e]:"function"==typeof d?new d:{}}function W(a,b,c,d){null!=d.onunload&&ub.push({controller:d,handler:d.onunload}),a.push(c),b.push(d)}function X(a,b,c,d,e,f){var g=V(c.views,b,d,a.controller),h=+(a&&a.attrs&&a.attrs.key);return a=0===Bb||zb||d&&d.indexOf(g)>-1?a.view(g):{tag:"placeholder"},"retain"===a.subtree?c:(h===h&&((a.attrs=a.attrs||{}).key=h),W(f,e,b,g),a)}function Y(a,b,c,d){for(var e=b&&b.controllers;null!=a.view;)a=X(a,a.view.$original||a.view,b,e,d,c);return a}function Z(a,b,c,d,e,f,h,i){var j=[],k=[];if(a=Y(a,b,j,k),!a.tag&&k.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");a.attrs=a.attrs||{},b.attrs=b.attrs||{};var l=Object.keys(a.attrs),m=l.length>("key"in a.attrs?1:0);if(G(a,b,l),g(a.tag)){var n=0===b.nodes.length;h=H(a,h);var o;if(n){o=R(a,h);var p=S(a,o,h,m),q=T(a,o,b,c,h,i);b=U(a,p,q,o,h,j,k)}else o=K(b,a,c,m,h,j,i,k);return(n||f===!0&&null!=o)&&y(d,o,e),J(i,a,o,n,b),b}}function $(a,b,c,d,g,i,j,k,l,m,n){return g=v(g),"retain"===g.subtree?i:(i=Q(g,i,k,d,c),h(g)?P(g,i,a,k,b,j,l,m,n):null!=g&&f(g)?Z(g,i,l,a,k,j,m,n):e(g)?i:N(i,g,k,a,j,l,b))}function _(a,b){return a.action-b.action||a.index-b.index}function ab(a,b,c,d,g){for(var h in c){var i=c[h],j=d[h];if(h in d&&j===i)"value"===h&&"input"===b&&a.value!=i&&(a.value=i);else{d[h]=i;try{if("config"===h||"key"===h)continue;if(e(i)&&"on"===h.slice(0,2))a[h]=fb(i,a);else if("style"===h&&null!=i&&f(i)){for(var k in i)(null==j||j[k]!==i[k])&&(a.style[k]=i[k]);for(var k in j)k in i||(a.style[k]="")}else null!=g?"href"===h?a.setAttributeNS("http://www.w3.org/1999/xlink","href",i):a.setAttribute("className"===h?"class":h,i):h in a&&"list"!==h&&"style"!==h&&"form"!==h&&"type"!==h&&"width"!==h&&"height"!==h?("input"!==b||a[h]!==i)&&(a[h]=i):a.setAttribute(h,i)}catch(l){if(l.message.indexOf("Invalid argument")<0)throw l}}}return d}function bb(a,b){for(var c=a.length-1;c>-1;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(d){}b=[].concat(b),b[c]&&cb(b[c])}a.length&&(a.length=0)}function cb(a){a.configContext&&e(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null),a.controllers&&t(a.controllers,function(a){e(a.onunload)&&a.onunload({preventDefault:m})}),a.children&&(h(a.children)?t(a.children,cb):a.children.tag&&cb(a.children))}function eb(a,b,c){var d=a.childNodes[b];if(d){var e=1!==d.nodeType,f=n.createElement("span");e?(a.insertBefore(f,d||null),f.insertAdjacentHTML("beforebegin",c),a.removeChild(f)):d.insertAdjacentHTML("beforebegin",c)}else db(a,c);for(var g=[];a.childNodes[b]!==d;)g.push(a.childNodes[b]),b++;return g}function fb(a,b){return function(c){c=c||event,s.redraw.strategy("diff"),s.startComputation();try{return a.call(b,c)}finally{Cb()}}}function kb(a){var b=ib.indexOf(a);return 0>b?ib.push(a)-1:b}function lb(a){var b=function(){return arguments.length&&(a=arguments[0]),a};return b.toJSON=function(){return a},b}function wb(a,b){var c=function(){return(a.controller||m).apply(this,b)||this};a.controller&&(c.prototype=a.controller.prototype);var d=function(c){var d=arguments.length>1?b.concat([].slice.call(arguments,1)):b;return a.view.apply(a,d?[c].concat(d):[c])};d.$original=a.view;var e={controller:c,view:d};return b[0]&&null!=b[0].key&&(e.attrs={key:b[0].key}),e}function xb(a,b){mb.splice(b,1),ob.splice(b,1),nb.splice(b,1),Ob(a),ib.splice(kb(a),1)}function Ab(){rb&&(rb(),rb=null),t(mb,function(a,b){var c=nb[b];if(ob[b]){var d=[ob[b]];s.render(a,c.view?c.view(ob[b],d):"")}}),sb&&(sb(),sb=null),pb=null,qb=new Date,s.redraw.strategy("diff")}function Cb(){"none"===s.redraw.strategy()?(Bb--,s.redraw.strategy("diff")):s.endComputation()}function Ib(a){return a.slice(Db[s.route.mode].length)}function Jb(a,b,c){Fb={};var d=c.indexOf("?");-1!==d&&(Fb=Nb(c.substr(d+1,c.length)),c=c.substr(0,d));var e=Object.keys(b),f=e.indexOf(c);if(-1!==f)return s.mount(a,b[e[f]]),!0;for(var g in b){if(g===c)return s.mount(a,b[g]),!0;var h=new RegExp("^"+g.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(h.test(c))return c.replace(h,function(){var c=g.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2);t(c,function(a,b){Fb[a.replace(/:|\./g,"")]=decodeURIComponent(d[b])}),s.mount(a,b[g])}),!0}}function Kb(a){if(a=a||event,!a.ctrlKey&&!a.metaKey&&2!==a.which){a.preventDefault?a.preventDefault():a.returnValue=!1;for(var b=a.currentTarget||a.srcElement,c="pathname"===s.route.mode&&b.search?Nb(b.search.slice(1)):{};b&&"A"!==b.nodeName.toUpperCase();)b=b.parentNode;s.route(b[s.route.mode].slice(Db[s.route.mode].length),c)}}function Lb(){"hash"!==s.route.mode&&o.hash?o.hash=o.hash:b.scrollTo(0,0)}function Mb(a,b){var d={},e=[];for(var g in a){var i=b?b+"["+g+"]":g,j=a[g];if(null===j)e.push(encodeURIComponent(i));else if(f(j))e.push(Mb(j,i));else if(h(j)){var k=[];d[i]=d[i]||{},t(j,function(a){d[i][a]||(d[i][a]=!0,k.push(encodeURIComponent(i)+"="+encodeURIComponent(a)))}),e.push(k.join("&"))}else j!==c&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(j))}return e.join("&")}function Nb(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));var b=a.split("&"),c={};return t(b,function(a){var b=a.split("="),d=decodeURIComponent(b[0]),e=2===b.length?decodeURIComponent(b[1]):null;null!=c[d]?(h(c[d])||(c[d]=[c[d]]),c[d].push(e)):c[d]=e}),c}function Ob(a){var b=kb(a);bb(a.childNodes,jb[b]),jb[b]=c}function Pb(a,b){var c=s.prop(b);return a.then(c),c.then=function(c,d){return Pb(a.then(c,d),b)},c["catch"]=c.then.bind(null,null),c["finally"]=function(a){var d=function(){return s.deferred().resolve(a()).promise};return c.then(function(a){return Pb(d().then(function(){return a}),b)},function(a){return Pb(d().then(function(){throw new Error(a)}),b)})},c}function Qb(a,b){function m(a){j=a||h,l.map(function(a){j===g?a.resolve(k):a.reject(k)})}function n(a,b,c,d){if((null!=k&&f(k)||e(k))&&e(a))try{var g=0;a.call(k,function(a){g++||(k=a,b())},function(a){g++||(k=a,c())})}catch(h){s.deferred.onerror(h),k=h,c()}else d()}function o(){var f;try{f=k&&k.then}catch(h){return s.deferred.onerror(h),k=h,j=d,o()}n(f,function(){j=c,o()},function(){j=d,o()},function(){try{j===c&&e(a)?k=a(k):j===d&&e(b)&&(k=b(k),j=c)}catch(h){return s.deferred.onerror(h),k=h,m()}k===i?(k=TypeError(),m()):n(f,function(){m(g)},m,function(){m(j===c&&g)})})}var c=1,d=2,g=3,h=4,i=this,j=0,k=0,l=[];i.promise={},i.resolve=function(a){return j||(k=a,j=c,o()),this},i.reject=function(a){return j||(k=a,j=d,o()),this},i.promise.then=function(a,b){var c=new Qb(a,b);return j===g?c.resolve(k):j===h?c.reject(k):l.push(c),c.promise}}function Rb(a){return a}function Sb(a){if(!a.dataType||"jsonp"!==a.dataType.toLowerCase()){var h=new b.XMLHttpRequest;if(h.open(a.method,a.url,!0,a.user,a.password),h.onreadystatechange=function(){4===h.readyState&&(h.status>=200&&h.status<300?a.onload({type:"load",target:h}):a.onerror({type:"error",target:h}))},a.serialize===JSON.stringify&&a.data&&"GET"!==a.method&&h.setRequestHeader("Content-Type","application/json; charset=utf-8"),a.deserialize===JSON.parse&&h.setRequestHeader("Accept","application/json, text/*"),e(a.config)){var i=a.config(h,a);null!=i&&(h=i)}var j="GET"!==a.method&&a.data?a.data:"";if(j&&!g(j)&&j.constructor!==b.FormData)throw new Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");return h.send(j),h}var d="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),f=n.createElement("script");b[d]=function(e){f.parentNode.removeChild(f),a.onload({type:"load",target:{responseText:e}}),b[d]=c},f.onerror=function(){return f.parentNode.removeChild(f),a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),b[d]=c,!1},f.onload=function(){return!1},f.src=a.url+(a.url.indexOf("?")>0?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+d+"&"+Mb(a.data||{}),n.body.appendChild(f)}function Tb(a,b,c){if("GET"===a.method&&"jsonp"!==a.dataType){var d=a.url.indexOf("?")<0?"?":"&",e=Mb(b);a.url=a.url+(e?d+e:"")}else a.data=c(b);return a}function Ub(a,b){var c=a.match(/:[a-z]\w+/gi);return c&&b&&t(c,function(c){var d=c.slice(1);a=a.replace(c,b[d]),delete b[d]}),a}var n,o,p,q,d="v0.2.1",h=Array.isArray||function(a){return"[object Array]"===i.call(a)},i={}.toString,j=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,k=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,l=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,m=function(){};r(b),s.version=function(){return d};var gb,z=1,A=2,B=3,db=function(){var a=function(a,b){a.appendChild(n.createRange().createContextualFragment(b))},b=function(a,b){a.insertAdjacentHTML("beforeend",b)};try{return n.createRange().createContextualFragment("x"),a}catch(c){return b}}(),hb={appendChild:function(a){gb===c&&(gb=n.createElement("html")),n.documentElement&&n.documentElement!==a?n.replaceChild(a,n.documentElement):n.appendChild(a),this.childNodes=n.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},ib=[],jb={};s.render=function(a,b,d){var e=[];if(!a)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var f=kb(a),g=a===n,h=g||a===n.documentElement?hb:a;g&&"html"!==b.tag&&(b={tag:"html",attrs:{},children:b}),jb[f]===c&&bb(h.childNodes),d===!0&&Ob(a),jb[f]=$(h,null,c,c,b,jb[f],!1,0,null,c,e),t(e,function(a){a()})},s.trust=function(a){return a=new String(a),a.$trusted=!0,a},s.prop=function(a){return(null!=a&&f(a)||e(a))&&e(a.then)?Pb(a):lb(a)};var tb,mb=[],nb=[],ob=[],pb=null,qb=0,rb=null,sb=null,ub=[],vb=16;s.component=function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);return wb(a,b)},s.mount=s.module=function(a,b){if(!a)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var c=mb.indexOf(a);0>c&&(c=mb.length);var d=!1,f={preventDefault:function(){d=!0,rb=sb=null}};t(ub,function(a){a.handler.call(a.controller,f),a.controller.onunload=null}),d?t(ub,function(a){a.controller.onunload=a.handler}):ub=[],ob[c]&&e(ob[c].onunload)&&ob[c].onunload(f);var g=null===b;if(!d){s.redraw.strategy("all"),s.startComputation(),mb[c]=a;var h=tb=b?b:b={controller:m},i=new(b.controller||m);return h===tb&&(ob[c]=i,nb[c]=b),Cb(),g&&xb(a,c),ob[c]}g&&xb(a,c)};var yb=!1,zb=!1;s.redraw=function(a){if(!yb){yb=!0,a&&(zb=!0);try{pb&&!a?(p===b.requestAnimationFrame||new Date-qb>vb)&&(pb>0&&q(pb),pb=p(Ab,vb)):(Ab(),pb=p(function(){pb=null},vb))}finally{yb=zb=!1}}},s.redraw.strategy=s.prop();var Bb=0;s.startComputation=function(){Bb++},s.endComputation=function(){Bb>1?Bb--:(Bb=0,s.redraw())},s.withAttr=function(a,b,c){return function(d){d=d||event;var e=d.currentTarget||this,f=c||this;b.call(f,a in e?e[a]:e.getAttribute(a))}};var Fb,Gb,Db={pathname:"",hash:"#",search:"?"},Eb=m,Hb=!1;return s.route=function(a,c,d,e){if(0===arguments.length)return Gb;if(3===arguments.length&&g(c)){Eb=function(b){var e=Gb=Ib(b);if(!Jb(a,d,e)){if(Hb)throw new Error("Ensure the default route matches one of the routes defined in m.route");Hb=!0,s.route(c,!0),Hb=!1}};var f="hash"===s.route.mode?"onhashchange":"onpopstate";b[f]=function(){var a=o[s.route.mode];"pathname"===s.route.mode&&(a+=o.search),Gb!==Ib(a)&&Eb(a)},rb=Lb,b[f]()}else if(a.addEventListener||a.attachEvent)a.href=("pathname"!==s.route.mode?o.pathname:"")+Db[s.route.mode]+e.attrs.href,a.addEventListener?(a.removeEventListener("click",Kb),a.addEventListener("click",Kb)):(a.detachEvent("onclick",Kb),a.attachEvent("onclick",Kb));else if(g(a)){var h=Gb;Gb=a;var i=c||{},j=Gb.indexOf("?"),k=j>-1?Nb(Gb.slice(j+1)):{};for(var l in i)k[l]=i[l];var m=Mb(k),p=j>-1?Gb.slice(0,j):Gb;m&&(Gb=p+(-1===p.indexOf("?")?"?":"&")+m);var q=(3===arguments.length?d:c)===!0||h===a;b.history.pushState?(rb=Lb,sb=function(){b.history[q?"replaceState":"pushState"](null,n.title,Db[s.route.mode]+Gb)},Eb(Db[s.route.mode]+Gb)):(o[s.route.mode]=Gb,Eb(Db[s.route.mode]+Gb))}},s.route.param=function(a){if(!Fb)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return Fb[a]},s.route.mode="search",s.route.buildQueryString=Mb,s.route.parseQueryString=Nb,s.deferred=function(){var a=new Qb;return a.promise=Pb(a.promise),a},s.deferred.onerror=function(a){if("[object Error]"===i.call(a)&&!a.constructor.toString().match(/ Error/))throw Bb=0,a},s.sync=function(a){function c(a,c){return function(g){return f[a]=g,c||(b="reject"),0===--e&&(d.promise(f),d[b](f)),g}}var b="resolve",d=s.deferred(),e=a.length,f=new Array(e);return a.length>0?t(a,function(a,b){a.then(c(b,!0),c(b,!1))}):d.resolve([]),d.promise},s.request=function(a){a.background!==!0&&s.startComputation();var b=new Qb,c=a.dataType&&"jsonp"===a.dataType.toLowerCase(),d=a.serialize=c?Rb:a.serialize||JSON.stringify,e=a.deserialize=c?Rb:a.deserialize||JSON.parse,f=c?function(a){return a.responseText}:a.extract||function(a){return 0===a.responseText.length&&e===JSON.parse?null:a.responseText};return a.method=(a.method||"GET").toUpperCase(),a.url=Ub(a.url,a.data),a=Tb(a,a.data,d),a.onload=a.onerror=function(c){try{c=c||event;var d=("load"===c.type?a.unwrapSuccess:a.unwrapError)||Rb,g=d(e(f(c.target,a)),c.target);"load"===c.type&&(h(g)&&a.type?t(g,function(b,c){g[c]=new a.type(b)}):a.type&&(g=new a.type(g))),b["load"===c.type?"resolve":"reject"](g)}catch(c){s.deferred.onerror(c),b.reject(c)}a.background!==!0&&s.endComputation()},Sb(a),b.promise=Pb(b.promise,a.initialValue),b.promise},s.deps=function(a){return r(b=a||b),b},s.deps.factory=a,s}("undefined"!=typeof window?window:{});"object"==typeof module&&null!=module&&module.exports?module.exports=m:"function"==typeof define&&define.amd&&define(function(){return m});