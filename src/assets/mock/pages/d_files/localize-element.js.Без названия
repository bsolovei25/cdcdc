/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require,exports,module){"use strict";var a=require("mi-assert"),b=require("mithril"),c=require("system/diagnostics/log-manager"),d=c.getLogger(module.id),e=require("./view-models/localize-view-model"),f=require("./views/localize-view"),g={};g.prototype=Object.create(HTMLElement.prototype),g.prototype.createdCallback=function a(){this._root=Object.prop(null),this._vm=Object.prop(null),this.value=null},g.prototype.attachedCallback=function a(){try{h(this),m(this),n(this)}catch(a){v(a)}};function h(a){s(a),a._vm(Object.resolve(e)),a._vm().type(a.getAttribute("type")||""),a._vm().phrase(a.getAttribute("phrase")||""),a._vm().key(a.getAttribute("key")||""),a._vm().context(a.getAttribute("context")||""),a._vm().dialogClosed.add(i,a,a)}function i(b,c,d){try{s(b),a.ok(c,"sender"),a.ok(d,"result"),a.stringNotEmpty(d.phrase,"result.phrase"),j(b,d.phrase)}catch(a){v(a)}}function j(b,c){s(b),a.stringNotEmpty(c,"value"),k(b,c)&&(b.value=c,l(b))}function k(b,c){return s(b),
a.stringNotEmpty(c,"value"),b.value!==c}function l(a){s(a),Element.raiseEvent(a,"change",{value:a.value})}function m(a){s(a);var b=a.querySelector(".localize-root");b||(b=Element.build("div",a,["localize-root"])),a._root(b)}function n(a){s(a),u(a._root()),t(a._vm()),b.mount(a._root(),{controller:a._vm,view:f})}g.prototype.detachedCallback=function a(){try{o(this),p(this),q(this)}catch(a){v(a)}};function o(a){s(a),u(a._root()),b.mount(a._root(),null)}function p(a){s(a),u(a._root()),a.removeChild(a._root()),a._root(null)}function q(a){s(a),t(a._vm()),a._vm().dialogClosed.remove(a),a._vm().dispose(),a._vm(null)}g.prototype.attributeChangedCallback=function a(b,c,d){try{r(this,b,d)}catch(a){v(a)}};function r(a,c,d){if(s(a),a._vm()){t(a._vm());var e=a._vm()[c];e&&(e(d||""),b.redraw())}}function s(b){a.instanceOf(b,HTMLElement,"self"),a.isFunction(b._root,"self._root"),a.isFunction(b._vm,"self._vm")}function t(b){a.instanceOf(b,e,"self._vm()")}function u(b){
a.instanceOf(b,HTMLElement,"self._root()")}function v(a){throw d.error(a.stack),a}return Element.registerElement("mi-localize",{prototype:g.prototype}),g});