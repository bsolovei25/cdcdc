/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("../services/offline-form-data-dto"),b=require("./offline-record-json-adapter"),c=require("system/lang/converter");function d(){}return d.fromJson=function b(d){if(d){var e=new a;return e.familyKey=c.toString(d.familyKey),e.formKey=c.toString(d.formKey),e.familyId=d.familyID?c.toString(d.familyID):c.toString(d.familyId),e.familyCaption=c.toString(d.familyCaption),e.relationshipFamilyId=d.relationshipFamilyID?c.toNullableString(d.relationshipFamilyID):c.toNullableString(d.relationshipFamilyId),e.hasReferenceDocRelationship=c.toBoolean(d.hasReferenceDocRelationship),e.records=this.adaptRecords(d.records),e}},d.fromJsonCollection=function a(b){var c=[],e;if(!b)return c;for(e=0;e<b.length;e++)c.push(d.fromJson(b[e]));return c},d.adaptRecords=function a(c){if(!c)return{};for(var e=Object.keys(c),f={},g=0;g<e.length;g++){var h=c[e[g]],i=b.fromJson(h);i.relatedRecords=d.adaptRelatedRecords(h),f[i.clientId]=i}return f},
d.adaptRelatedRecords=function a(b){var c=[];if(b.relatedRecords&&b.relatedRecords.length>0)for(var e=0;e<b.relatedRecords.length;e++){var f=d.fromJson(b.relatedRecords[e]);c.push(f)}return c},d});