/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=Object.create(HTMLElement.prototype),b=require("system/globalization/translator");a.createdCallback=function(){var a=Element.build("header",this,["header"]),c=Element.build("div",this,["content"]),d=Element.build("footer",this,["footer"]),f=Element.build("button",d,["next","btn","btn-primary","btn-text"],{name:"next"}),g=Element.build("button",d,["hidden","finish","btn","btn-primary","btn-text"],{name:"finish"}),h=Element.build("button",d,["hidden","back","btn","btn-primary","btn-text"],{name:"back"});if(this.steps=null,this.steps_length=null,this.stepItems=[],this.translator=Object.resolve(b),this.getAttribute("title")){Element.build("h1",a).textContent=this.getAttribute("title")}this.getAttribute("data-steps")&&e(this,this.getAttribute("data-steps")),h.innerHTML=this.translator.translate("PREVIOUS"),f.innerHTML=this.translator.translate("NEXT"),g.innerHTML=this.translator.translate("FINISH")},a.attachedCallback=function(){
this.querySelector("footer").addEventListener("click",this)},a.detachedCallback=function(){this.querySelector("footer").removeEventListener("click",this)},a.handleEvent=function(a){"click"===a.type&&"BUTTON"===a.target.tagName&&(a.target.classList.contains("next")||a.target.classList.contains("back")?c(this,a):a.target.classList.contains("finish")&&this.dispatchEvent(new CustomEvent("completed",{bubbles:!0})))},a.attributeChangedCallback=function(a,b,c){switch(a){case"title":var d=this.querySelector("h1")||document.createElement("h1"),f=this.querySelector("header");d.textContent=c,f.querySelector("header")||f.insertBefore(d,f.querySelector("ul"));break;case"data-steps":e(this,c);break;case"data-active":var g=this.querySelector(".active");g&&g.classList.remove("active"),parseInt(c)>0&&"0"===b&&this.querySelector(".back").classList.remove("hidden"),"0"===c&&parseInt(b)>0&&this.querySelector(".back").classList.add("hidden"),
parseInt(c)===this.steps_length-2&&(this.querySelector(".next").classList.remove("hidden"),this.querySelector(".finish").classList.add("hidden")),parseInt(c)===this.steps_length-1&&(this.querySelector(".finish").classList.remove("hidden"),this.querySelector(".next").classList.add("hidden")),this.hasAttribute("data-valid")&&this.setAttribute("data-valid","false"),this.stepItems[c].classList.add("active"),this.dispatchEvent(new CustomEvent("active-changed",{bubbles:!0}));break;case"data-valid":"true"===c?(this.querySelector(".next").removeAttribute("disabled"),this.querySelector(".finish").removeAttribute("disabled")):(this.querySelector(".next").setAttribute("disabled",!0),this.querySelector(".finish").setAttribute("disabled",!0))}};function c(a,b){d(a,b.target)}function d(a,b){var c=parseInt(a.getAttribute("data-active"));b.classList.contains("cancel")?console.log("Wizard Canceled"):(b.classList.contains("next")&&(c++,a.setAttribute("data-active",c)),b.classList.contains("back")&&(c--,
a.setAttribute("data-active",c)))}function e(a,b){var c=a.querySelector("header"),d=Element.build("ul",c);a.steps=b.split(","),a.steps_length=a.steps.length,a.step_width=(100-.4*a.steps_length)/a.steps_length,a.steps.forEach(function(b){var c=Element.build("li",d),e=Element.build("div",c);c.setAttribute("style","width: "+a.step_width+"%;"),e.innerHTML=b,a.stepItems.push(c)}),a.stepItems[0].classList.add("active")}return Element.registerElement("mi-wizard",{prototype:a}),a});