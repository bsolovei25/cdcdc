/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("ramda"),b=require("mithril"),c=require("mi-assert"),d=require("application/application-context"),e=require("./localized-value");function f(a,d,e,f,g){c.isNumber(d,"type"),c.stringNotEmpty(e,"phrase"),c.isString(f,"key"),c.isString(g,"context"),i(f,g),this.cultures=b.prop(),this.type=b.prop(d),this.phrase=b.prop(e||""),this.key=b.prop(f),this.context=b.prop(g),this.values=b.prop(),this.updateCultures(a)}f.prototype.updateCultures=function b(c){this.cultures(c),this.values(a.map(e.fromCulture,this.cultures()))},f.prototype.add=function b(c){var d=a.find(g(c.cultureId),this.values());d&&d.phrase(c.value||"")};function g(a){return function(b){return c.stringNotEmpty(a,"culture"),c.instanceOf(b,e,"value"),a===b.culture().id}}f.prototype.addAll=function b(c){a.forEach(this.add.bind(this),c)},f.prototype.currentPhrase=function a(){var b,c=d.session.licensedCultureId;return c?(b=h(this,c),e.getPhraseOrDefault(b,this.phrase())):this.phrase()}
;function h(b,d){return c.ok(b,"self"),c.stringNotEmpty(d,"culture"),a.find(g(d),b.values())}function i(a,b){c.assert(a.length+b.length>0,"Either key or context must be populated: key = "+a+", context = "+b)}return f});