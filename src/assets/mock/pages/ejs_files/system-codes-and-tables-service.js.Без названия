/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("jquery"),b=require("lodash"),c=require("system/http/ajax-client"),d=require("dcm/models/system-table-model"),e="api/core/security/user/",f="api/core/systemcode/";require("system/lang/object");function g(a){this.ajaxClient=a}return g.dependsOn=[c],g.prototype.getAllSystemTables=function(){var b=this,c=a.Deferred();return b.ajaxClient.get(f+"table").done(function(b){b.sort(function(a,b){return String.compare(a.id,b.id)}),a.each(b,function(a,b){b.displaytext=b.id+" ("+b.caption+")"}),c.resolve(b)}).fail(function(a){c.reject(a)}),c.promise()},g.prototype.getSystemCodes=function(b){var c=this,d=a.Deferred();return c.ajaxClient.get(f+"code/table?tableId="+b).done(function(a){a.sort(function(a,b){return String.compare(a.description,b.description)}),d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},g.prototype.getFilteredTablesAndCodes=function(b){var c=this,d=a.Deferred()
;return c.ajaxClient.get(f+"code/filteredcodes?term="+b).done(function(a){a.sort(function(a,b){return String.compare(a.description,b.description)}),d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},g.prototype.createTableItem=function(b){var c=a.Deferred();return this.ajaxClient.post(f+"table",b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},g.prototype.updateTableItem=function(b){var c=a.Deferred();return this.ajaxClient.put(f+"table",b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},g.prototype.deleteTableItem=function(b){var c=a.Deferred();return this.ajaxClient.delete(f+"table/"+b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},g.prototype.updateCode=function(b){var c=a.Deferred();return this.ajaxClient.put(f+"code",b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},g.prototype.createCode=function(b){var c=a.Deferred()
;return this.ajaxClient.post(f+"code",b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},g.prototype.deleteCode=function(b){var c=a.Deferred();return this.ajaxClient.delete(f+"code/"+b).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},g.prototype.changeCodeSequence=function(b,c){var d=this,e=a.Deferred();return d.ajaxClient.put(f+"code/sequence/"+b,c).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},g.prototype.getReferenceCodes=function(b){var c=this,d=a.Deferred();return c.ajaxClient.get(f+"referencecode/"+b).done(function(a){d.resolve(a)}).fail(function(a){d.reject(a)}),d.promise()},g.prototype.createRefCode=function(b,c){var d=this,e=a.Deferred();return d.ajaxClient.post(f+"referencecode/"+b+"/"+c).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},g.prototype.createRefCodes=function(c,d){var e=this,g=[];b.each(d,function(a,b){g.push(b.key)}.bind(null,c));var h=a.Deferred()
;return e.ajaxClient.post(f+"referencecodes/"+c+"?refKeys="+g).done(function(a){h.resolve(a)}).fail(function(a){h.reject(a)}),h.promise()},g.prototype.deleteRefCode=function(b,c){var d=this,e=a.Deferred();return d.ajaxClient.delete(f+"referencecode/"+b+"/"+c).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},g.prototype.getUserInformation=function(a){return this.ajaxClient.get(e+a)},g});