/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(["require","exports","system/lang/ioc","system/functional/maybe","system/hardware/device","security/services/security-service","security/model/saved-session"],function(require,exports,a,b,c){"use strict";var d=require("security/services/security-service"),e=require("security/model/saved-session"),f=function(){function a(a,b){this.service=a,this.device=b}return a.prototype.execute=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(b){switch(b.label){case 0:return this.device.isMobileApp()?[2]:[4,this.tryFetchSession()];case 1:return a=b.sent(),a.match(function(a){return e.saveSession(a)},function(){return e.deleteSession()}),[2]}})})},a.prototype.tryFetchSession=function(){return __awaiter(this,void 0,void 0,function(){var a,c,d;return __generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),a=b.just,[4,this.fetchSession()];case 1:return[2,a.apply(void 0,[c.sent()])];case 2:return d=c.sent(),[2,b.nothing()]
;case 3:return[2]}})})},a.prototype.fetchSession=function(){return Promise.resolve(this.service.getSession())},a}();return f=__decorate([a.dependsOn(d,c)],f)});