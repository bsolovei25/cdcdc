!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(e,t){e.exports='<div class="asset-hierarchy-control-filter-form">\r\n    <div class="popover-content">\r\n        <div class="form-group filter-selector-1 filter-classification-group filter-category-group">\r\n            <label>Asset Classification</label>\r\n            <select class="uacb-form-control classification category">\r\n                <option value="">Select Asset Classification</option>\r\n            </select>\r\n        </div>\r\n        <div class="form-group filter-selector-2 filter-class-group hide">\r\n            <label>Class</label>\r\n            <select class="uacb-form-control category-class">\r\n                <option value="">Select a Class</option>\r\n            </select>\r\n        </div>\r\n        <div class="form-group filter-selector-3 filter-type-group hide">\r\n            <label>Type</label>\r\n            <select class="uacb-form-control category-type">\r\n                <option value="">Select a Type</option>\r\n            </select>\r\n        </div>\r\n        <div class="form-group apply-btn">\r\n            <button class="btn btn--primary applyBtn"> Apply </button>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,i){var n;void 0===(n=function(e){function t(){}function i(e,t){return e[t]}function n(e,t,i){return e[t]=i,e[t]}return t.prototype.addProperties=function(e,t){t._handlers=null,Object.defineProperty(e,"handlers",{get:function(){}.bind(null,t),set:function(){}.bind(null,t)}),t._selectedAsset=null,Object.defineProperty(e,"selectedAsset",{get:function(e){return e._selectedAsset||null}.bind(null,t)}),Object.defineProperty(e,"value",{get:function(e){return[e._selectedAsset]||!1}.bind(null,t)}),t._selectedAssetParent=null,Object.defineProperty(e,"selectedAssetParent",{get:function(e){return e._selectedAssetParent||null}.bind(null,t)}),t._browserContext=null,Object.defineProperty(e,"browserContext",{get:function(e){return e.getSelectedItemPath()}.bind(null,t)}),t._initialContext=null,Object.defineProperty(e,"initialContext",{get:function(e){return e._initialContext}.bind(null,t),set:function(e,t){e._initialContext=t}.bind(null,t)}),t._enableMultiSelect=!1,Object.defineProperty(e,"enableMultiSelect",{get:function(e){return e._enableMultiSelect}.bind(null,t),set:function(e,t){e._enableMultiSelect=t}.bind(null,t)}),t._scrollDirection=null,Object.defineProperty(e,"scrollDirection",{get:function(e){return e._scrollDirection}.bind(null,t),set:function(e,t){e._scrollDirection=t}.bind(null,t)}),t._itemSelectorIcon=!1,Object.defineProperty(e,"itemSelectorIcon",{get:function(e){return e._itemSelectorIcon}.bind(null,t),set:function(e,t){e._itemSelectorIcon=t}.bind(null,t)}),t._filters={},Object.defineProperty(e,"filters",{get:function(e){return e._filters}.bind(null,t),set:function(e,t){e._filters=t}.bind(null,t)}),t._filterConfig=null,Object.defineProperty(e,"filterConfig",{get:function(e){return e._filterConfig}.bind(null,t),set:function(e,t){e._filterConfig=t}.bind(null,t)}),t._filterCB=null,Object.defineProperty(e,"filterCB",{get:function(e){return e._filterCB}.bind(null,t),set:function(e,t){e._filterCB=t}.bind(null,t)}),t._showFilter=!1,Object.defineProperty(e,"showFilter",{get:function(e){return e._showFilter}.bind(null,t),set:function(e,t){e._showFilter=t,e.utility.handleHierarchyFilterVisibility(e)}.bind(null,t)}),t._filterTemplate=!1,Object.defineProperty(e,"filterTemplate",{get:function(e){return e._filterTemplate}.bind(null,t),set:function(e,t){e._filterTemplate=t,e.utility.handleFilterTemplate(e)}.bind(null,t)}),t._searchCB=null,Object.defineProperty(e,"searchCB",{get:function(e){return e._searchCB}.bind(null,t),set:function(e,t){e._searchCB=t}.bind(null,t)}),t._showSearch=!1,Object.defineProperty(e,"showSearch",{get:function(e){return e._showSearch}.bind(null,t),set:function(e,t){e._showSearch=t,e.utility.handleHierarchySearchVisibility(e)}.bind(null,t)}),t._searchTemplate=!1,Object.defineProperty(e,"searchTemplate",{get:function(e){return e._searchTemplate}.bind(null,t),set:function(e,t){e._searchTemplate=t,e.utility.handleSearchTemplate(e)}.bind(null,t)}),t._spinnerTemplate=!1,Object.defineProperty(e,"spinnerTemplate",{get:function(e){return e._spinnnerTemplate}.bind(null,t),set:function(e,t){e._spinnerTemplate=t,e.utility.handleSpinnerTemplate(e)}.bind(null,t)}),t._noDataText=null,Object.defineProperty(e,"noDataText",{get:i.bind(null,t,"_noDataText"),set:n.bind(null,t,"_noDataText")}),t._filterText=null,Object.defineProperty(e,"filterText",{get:i.bind(null,t,"_filterText"),set:n.bind(null,t,"_filterText")}),t._searchText=null,Object.defineProperty(e,"searchText",{get:i.bind(null,t,"_searchText"),set:n.bind(null,t,"_searchText")}),t._applyBtnText=null,Object.defineProperty(e,"applyBtnText",{get:i.bind(null,t,"_applyBtnText"),set:n.bind(null,t,"_applyBtnText")}),t._clearBtnText=null,Object.defineProperty(e,"clearBtnText",{get:i.bind(null,t,"_clearBtnText"),set:n.bind(null,t,"_clearBtnText")}),t._loadDataCB=null,Object.defineProperty(e,"loadDataCB",{get:function(e){return e._loadDataCB}.bind(null,t),set:function(e,t){if(e._loadDataCB=t,"function"==typeof t){var i=e._loadDataCB();e.loadData(i)}return t}.bind(null,t)}),t._selectionCB=null,Object.defineProperty(e,"selectionCB",{get:function(e){return e._selectionCB}.bind(null,t),set:function(e,t){e._selectionCB=t}.bind(null,t)}),t._groupSelectionCB=null,Object.defineProperty(e,"groupSelectionCB",{get:function(e){return e._groupSelectionCB}.bind(null,t),set:function(e,t){e._groupSelectionCB=t}.bind(null,t)}),t._groupSearchCB=null,Object.defineProperty(e,"groupSearchCB",{get:function(e){return e._groupSearchCB}.bind(null,t),set:function(e,t){e._groupSearchCB=t}.bind(null,t)}),t._itemExpandCB=null,Object.defineProperty(e,"itemExpandCB",{get:function(e){return e._itemExpandCB}.bind(null,t),set:function(e,t){e._itemExpandCB=t}.bind(null,t)})},t}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(e){"use strict";var t=new function(){this.isActiveAsRoot=!1,this.assetSearchFn=null,this.changeIconFn=null,this.clearSearchFn=null,this.toggleVisFn=null};function i(){this.stateHandler=t}function n(e){e.querySelector(".asset-hierarchy-tree").style.height="calc(100% - "+(e.querySelector(".tool-bar").clientHeight+5)+"px)"}function r(e){return!!e&&(!(e&&(!e.toString().trim()||"undefined"===e.toString()||"null"===e.toString()||"false"===e.toString()||"true"===e.toString()))&&e)}function s(e,t){if(e[t]&&"function"==typeof e[t]){var i=Array.prototype.slice.call(arguments,2);e[t].apply(e,i)}}function l(e,t,i){var r=$.Deferred();i.target.value&&i.target.value.length<=2?t.querySelector(".search-box").classList.add("has-error"):t.querySelector(".search-box").classList.remove("has-error"),n(t),i.target.value&&i.target.value.length>2&&(13==i.which||13==i.keyCode)&&(t.utility.showSpinner(t,t.assetHierarchySpinner,t.treeNode),t.isGroup?s(t,"groupSearchCB",i.target.value,r.promise()):(t.hierarchyFilter.disableTriggerBtn(t),s(t,"searchCB",i.target.value,r.promise()),t.utility.dispatchCustomEvent(t,t._events.SEARCHED,i.target.value),t.hasSearch=!0))}function a(e,t){e.utility.showSpinner(e,e.assetHierarchySpinner,e.treeNode),e.querySelector(".search-box input").value="",e._searchTemplate||e.dxTreeview.option("items",e.rootAssets),e.hierarchyFilter.enableTriggerBtn(e),e.utility.dispatchCustomEvent(e,e._events.SEARCH_CLEARED),o(e,!1),e.hasSearch=!1}function o(e,t){t?(e.querySelector(".search-box .ahc-search-clear-icon").classList.remove("hide"),e.querySelector(".search-box .ahc-search-icon").classList.add("hide")):(e.querySelector(".search-box .ahc-search-icon").classList.remove("hide"),e.querySelector(".search-box .ahc-search-clear-icon").classList.add("hide"))}return i.prototype.bindEvents=function(e){this.hierarchyTabEvents(e.assetHierarchy)},i.prototype.unbindEvents=function(e){this.clearHierarchyTabEvents(e.assetHierarchy)},i.prototype.clearSearch=function(e){e.querySelector(".search-box input").value="",e.utility.dispatchCustomEvent(e,e._events.SEARCH_CLEARED,!0),o(e,!1)},i.prototype.disableSearch=function(e){e.querySelector(".search-box input").disabled=!0},i.prototype.disableSearchOnFilterValue=function(e){e.querySelector(".search-box input").disabled=!!e.hierarchyFilter.getSelectorInputValue(1)},i.prototype.enableSearch=function(e){e.querySelector(".search-box input").disabled=!1},i.prototype.hierarchyTabEvents=function(e){t.assetSearchFn=l.bind(null,this,e),t.changeIconFn=o.bind(null,e,!0),t.clearSearchFn=a.bind(null,e),t.toggleVisFn=function(e){e.utility.toggleVisiblity(e,"uacb-filter-popup")?(e.utility.dispatchCustomEvent(e,e._events.FILTER_CLOSED),e.utility.disableSearchOnFilterValue(e)):(e.utility.dispatchCustomEvent(e,e._events.FILTER_OPENED),e.utility.disableSearch(e));n(e)}.bind(null,e),e.querySelector(".search-box input")&&e.querySelector(".search-box input").addEventListener("keyup",t.assetSearchFn),e.querySelector(".search-box input")&&e.querySelector(".search-box input").addEventListener("focus",t.changeIconFn),e.querySelector(".search-box .ahc-search-clear-icon")&&e.querySelector(".search-box .ahc-search-clear-icon").addEventListener("click",t.clearSearchFn),e.querySelector(".filter-box .filter-trigger-btn")&&e.querySelector(".filter-box .filter-trigger-btn").addEventListener("click",t.toggleVisFn),e.hierarchyFilter&&e.hierarchyFilter.bindEvents(e)},i.prototype.clearHierarchyTabEvents=function(e){e.querySelector(".search-box input")&&e.querySelector(".search-box input").removeEventListener("keyup",t.assetSearchFn),e.querySelector(".search-box input")&&e.querySelector(".search-box input").removeEventListener("focus",t.changeIconFn),e.querySelector(".search-box .ahc-search-clear-icon")&&e.querySelector(".search-box .ahc-search-clear-icon").removeEventListener("click",t.clearSearchFn),e.querySelector(".filter-box .filter-trigger-btn")&&e.querySelector(".filter-box .filter-trigger-btn").removeEventListener("click",t.toggleVisFn),e.hierarchyFilter&&e.hierarchyFilter.unbindEvents(e)},i.prototype.handleSpinnerTemplate=function(e){e.assetHierarchySpinner.innerHTML=e._spinnerTemplate},i.prototype.handleSearchTemplate=function(e){this.clearHierarchyTabEvents(e),e.querySelector(".search-box").innerHTML=e._searchTemplate,e.addFilterPopupView.call(e),this.hierarchyTabEvents(e)},i.prototype.handleFilterTemplate=function(e){this.clearHierarchyTabEvents(e),e.querySelector(".filter-box").innerHTML=e._filterTemplate,e.addFilterPopupView.call(e),this.hierarchyTabEvents(e)},i.prototype.groupTabEvents=function(e){e.groupTab.addEventListener("click",function(e,t){e.isGroup=t,t?function(e){e.hierarchyTab.classList.remove("active"),e.groupTab.classList.add("active"),e.assetHierarchy.classList.add("hide"),e.assetGroup.classList.remove("hide"),e.utility.createAssetList(e,e.groupAssets,!1),function(e){var t=e.assetCache.getGroupSelection();if(t){var i=e.querySelector('.list-group-item[data-key="'+t.entityKey+'"]');i&&i.classList.add("active")}}(e)}(e):function(e){e.assetGroup.classList.add("hide"),e.assetHierarchy.classList.remove("hide"),e.groupTab.classList.remove("active"),e.hierarchyTab.classList.add("active");for(;e.assetHierarchy.hasChildNodes()&&e.assetHierarchy.childNodes[2];)e.assetHierarchy.removeChild(e.assetHierarchy.childNodes[2]);e.utility.createAssetList(e,e.assetCache.getParents(),!0),e.utility.createAssetList(e,e.assets,!1)}(e)}.bind(null,e,!0)),e.assetGroup.querySelector(".search-btn").addEventListener("click",this.toggleVisiblity.bind(null,e.assetGroup,"search-box")),e.assetGroup.querySelector(".search-box input").addEventListener("keyup",l.bind(null,e)),e.assetGroup.querySelector(".search-box .ahc-search-clear-icon").addEventListener("click",a.bind(null,e)),e.assetGroup.querySelector(".filter-btn").addEventListener("click",this.toggleVisiblity.bind(null,e.assetGroup,"filter-popup")),e.assetHierarchySpinner.classList.remove("hide")},i.prototype.showSpinner=function(e,t,i){t&&t.parentNode.appendChild(t),t&&t.classList.remove("hide"),e.hierarchyFilter&&e.hierarchyFilter.disableTriggerBtn(e),this.disableSearch(e)},i.prototype.hideSpinner=function(e,t,i){t&&t.classList.add("hide"),this.disableSearchOnFilterValue(e),this.disableFilterOnSearchValue(e)},i.prototype.showTree=function(e){e&&e.classList.remove("hide")},i.prototype.hideTree=function(e){e&&e.classList.add("hide")},i.prototype.disableFilterOnSearchValue=function(e){e.hierarchyFilter.enableTriggerBtn(e),e.hasSearch&&e.hierarchyFilter.disableTriggerBtn(e)},i.prototype.handleHierarchyFilterVisibility=function(e){this.toggleVisiblity(e,"filter-box")},i.prototype.handleHierarchySearchVisibility=function(e){this.toggleVisiblity(e,"search-box")},i.prototype.loadAsset=function(e){if(e.assetHierarchySpinner.classList.add("hide"),this.removeHierarchyList(e),this.createAssetList(e,e.assetCache.getParents(),!0),this.createAssetList(e,e.assets,!1),e.assets.length){var t=e.assetHierarchy.querySelector(".list-group.path-list").clientHeight;e.assetHierarchy.querySelector(".list-group.item-list").style.height="calc(100% - "+(t+41)+"px)"}},i.prototype.loadGroup=function(e){this.createAssetList(e,e.groupAssets,!1,!0)},i.prototype.createAssetList=function(e,t,i,n){var r=this;if(t&&t.length>0){var s=document.createElement("ul");s.className="list-group "+(i?" path-list":" item-list")+(r.isActiveAsRoot&&i?" root-current-asset":""),t.forEach(function(t){s.appendChild(r.createAssets(e,t,i))}),n?e.assetGroup.appendChild(s):e.assetHierarchy.appendChild(s)}},i.prototype.createAssets=function(e,t,i){var n=document.createElement("li");n.className=i?"list-group-item parent-list":"list-group-item",n.innerHTML=Number(t.childCount)>0?t.name+" >>>>":"<span>"+t.name+"</span>",n.innerHTML+=!i&&e._enableMultiSelect?'<span class="spacer"></span><button class="btn btn-icon btn--bare pull-right asset-item-selector"><i class="icon icon-plus"></i></button>':"",n.setAttribute("data-key",t.entityKey);var r=n.querySelector(".asset-item-selector");return r&&r.addEventListener("click",this.assetMultiSelection.bind(null,e,n,t)),n.addEventListener("click",e.assetSelection.bind(null,e,n,t)),n},i.prototype.removeHierarchyList=function(e){e.assetHierarchy.querySelectorAll(".list-group").forEach(function(e){e.remove()})},i.prototype.toggleVisiblity=function(e,t){return e.querySelector("."+t).classList.toggle("hide"),e.querySelector("."+t).classList.contains("hide")},i.prototype.showElem=function(e,t){return e.querySelector("."+t).classList.remove("hide"),e.querySelector("."+t).classList.contains("hide")},i.prototype.hideElem=function(e,t){return e.querySelector("."+t).classList.add("hide"),e.querySelector("."+t).classList.contains("hide")},i.prototype.dispatchCustomEvent=function(e,t,i,n){var r={bubbles:!0,cancelable:!0};void 0!==i&&(r.detail=i);var s=new CustomEvent(t,r);e.dispatchEvent(s)},i.prototype.callback=function(e,t,i,n){s(e,t,i,n)},i.prototype.assetMultiSelection=function(e,t,i,n){n.stopPropagation(),callback(e,"multiSelectionCB","Home"===i.description||"Home"===i.name?null:i),i.btnElement=t,dispatchCustomEvent(e,"multiSelected","Home"===i.description||"Home"===i.name?null:i)},i.prototype.getGuid=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},i.prototype.updateTexts=function(e){e.filterBox.querySelector(".filter-txt").innerHTML=r(e._filterText)||"Filter",e.filterBox.querySelector(".applyBtn").innerHTML=r(e._applyBtnText)||"Apply",e.filterBox.querySelector(".ahc-filters-clear-btn").innerHTML=r(e._clearbtnText)||"Clear",e.searchBox.querySelector(".ahc-search-input").setAttribute("placeholder",r(e._searchText)||"Search")},i.prototype.serachRetainCallback=function(e,t){var i=$.Deferred();e.searchBox.querySelector(".search-box input").value=t,e.hierarchyFilter.disableTriggerBtn(e),s(e,"searchCB",t,i.promise()),e.utility.dispatchCustomEvent(e,e._events.SEARCHED,t),e.hasSearch=!0,o(e,!0)},i}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){var e=[{id:"CLASSIFICATION",title:"Asset Classification",defaultCaption:"Select Asset Classification",className:"",disabled:!1,visible:!0,value:""},{id:"CLASS",title:"Class",defaultCaption:"Select a Class",className:"",disabled:!1,visible:!1,value:""},{id:"TYPE",title:"Type",defaultCaption:"Select a Type",className:"",disabled:!1,visible:!1,value:""}];function t(){this.Selector1=null,this.Selector2=null,this.Selector3=null,this.clearBtn=null,this.metaData=null,this.selectedCategory=null,this.selectedClass=null,this.selectedType=null,this.applyFilterFn=null,this.clearFilterFn=null,this.selector1ChangeFn=null,this.selector2ChangeFn=null,this.selector3ChangeFn=null}var i=t.prototype;function n(e,t){t.title&&(e.querySelector("label").innerHTML=t.title),t.defaultCaption&&(e.querySelector("select").options[0].innerHTML=t.defaultCaption),void 0!==t.disabled&&(e.querySelector("select").disabled=t.disabled),t.value&&(e.querySelector("select").value=t.value),void 0!==t.visible&&(t.visible?e.classList.remove("hide"):e.classList.add("hide"))}function r(e,t){t.utility.showElem(t,"ahc-filters-clear-btn")}function s(e,t,i){var n=document.createElement("option");n.value=t,n.text=i,e.appendChild(n)}function l(e){e.querySelector("select.category-class").options.length=1,e._filters[e.hierarchyFilter.metaData[1].id]="",e.querySelector("select.category-type").options.length=1,e._filters[e.hierarchyFilter.metaData[2].id]=""}return i.bindEvents=function(e){this.Selector1=e.querySelector(".filter-selector-1"),this.Selector2=e.querySelector(".filter-selector-2"),this.Selector3=e.querySelector(".filter-selector-3"),this.clearBtn=e.querySelector(".ahc-filters-clear-btn"),this.applyFilterFn||(this.applyFilterFn=function(e,t){var i=t.querySelector("select.classification").value;t.utility.toggleVisiblity(t,"uacb-filter-popup"),t.utility.showSpinner(t,t.assetHierarchySpinner,t.treeNode),t.querySelector(".asset-hierarchy-tree").style.height="calc(100% - "+(t.querySelector(".tool-bar").clientHeight+5)+"px)",i?(t.utility.callback(t,"filterCB",i,[e.selectedCategory,e.selectedClass,e.selectedType]),t.utility.dispatchCustomEvent(t,t._events.FILTER_UPDATE,i,[e.selectedCategory,e.selectedClass,e.selectedType]),r(e,t),t.utility.disableSearch(t),t.hasFilters=!0):(t.rootAssets&&t.dxTreeview.option("items",t.rootAssets),t.utility.callback(t,"filterCB"),t.utility.dispatchCustomEvent(t,t._events.FILTER_UPDATE),t.utility.enableSearch(t),t.hasFilters=!1)}.bind(null,this,e)),this.clearFilterFn||(this.clearFilterFn=this.clear.bind(null,this,e)),e.querySelector(".apply-btn .applyBtn")&&e.querySelector(".apply-btn .applyBtn").removeEventListener("click",this.applyFilterFn),e.querySelector(".apply-btn .applyBtn")&&e.querySelector(".apply-btn .applyBtn").addEventListener("click",this.applyFilterFn),e.querySelector(".ahc-filters-clear-btn")&&e.querySelector(".ahc-filters-clear-btn").removeEventListener("click",this.clearFilterFn),e.querySelector(".ahc-filters-clear-btn")&&e.querySelector(".ahc-filters-clear-btn").addEventListener("click",this.clearFilterFn)},i.unbindEvents=function(e){this.applyFilterFn&&e.querySelector(".apply-btn .applyBtn")&&e.querySelector(".apply-btn .applyBtn").removeEventListener("click",this.applyFilterFn),this.clearFilterFn&&e.querySelector(".ahc-filters-clear-btn")&&e.querySelector(".ahc-filters-clear-btn").removeEventListener("click",this.clearFilterFn),this.selector1ChangeFn&&e.querySelector("select.category")&&e.querySelector("select.category").removeEventListener("change",this.selector1ChangeFn),this.selector2ChangeFn&&e.querySelector("select.category-class")&&e.querySelector("select.category-class").removeEventListener("change",this.selector2ChangeFn),this.selector3ChangeFn&&e.querySelector("select.category-type")&&e.querySelector("select.category-type").removeEventListener("change",this.selector3ChangeFn),this.Selector1=null,this.Selector2=null,this.Selector3=null,this.clearBtn=null,this.applyFilterFn=null,this.clearFilterFn=null,this.selector1ChangeFn=null,this.selector2ChangeFn=null,this.selector3ChangeFn=null},i.applyMetaConfig=function(t,i){this.Selector1=t.querySelector(".filter-selector-1"),this.Selector2=t.querySelector(".filter-selector-2"),this.Selector3=t.querySelector(".filter-selector-3"),this.clearBtn=t.querySelector(".ahc-filters-clear-btn"),this.metaData=function(e,t){var i=Object(e);for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(e,i);for(var r=0,s=this.metaData.length;r<s;r++)n(this["Selector"+(r+1)],this.metaData[r])},i.disableTriggerBtn=function(e){e.querySelector(".filter-trigger-btn")&&(e.querySelector(".filter-trigger-btn").disabled=!0),e.querySelector(".apply-btn .applyBtn")&&(e.querySelector(".apply-btn .applyBtn").disabled=!0)},i.enableTriggerBtn=function(e){e.querySelector(".filter-trigger-btn")&&(e.querySelector(".filter-trigger-btn").disabled=!1),e.querySelector(".apply-btn .applyBtn")&&(e.querySelector(".apply-btn .applyBtn").disabled=!1)},i.getSelectorInputValue=function(e){return this["Selector"+e].querySelector("select").value},i.clear=function(e,t){e.clearSelects(e,t),t.utility.hideElem(t,"ahc-filters-clear-btn"),t.utility.dispatchCustomEvent(t,t._events.FILTER_CLEARED,t._filters),t.rootAssets&&t.dxTreeview.option("items",t.rootAssets),t.utility.callback(t,"filterCB"),t.utility.dispatchCustomEvent(t,t._events.FILTER_UPDATE),t.utility.enableSearch(t),t.hasFilters=!1},i.clearSelects=function(e,t){this.Selector1.querySelector("select").value="",t.hierarchyFilter.metaData&&(t._filters[t.hierarchyFilter.metaData[0].id]="",l(t)),t.utility.dispatchCustomEvent(t,t._events.FILTER_CLEARED,t._filters)},i.loadClassification=function(e,t){for(var i,n={},r=e.querySelector("select.classification"),l=0;i=t[l++];){var a=i.classCode;a in n||(n[a]=1,s(r,i.classCode,i.classDescription))}},i.getCategoryNames=function(e,t){for(var i,n={},r=e.querySelector("select.category"),a=0;i=t[a++];){var o=i.code;o in n||(n[o]=1,s(r,i.code,i.description))}this.selector1ChangeFn&&r.removeEventListener("change",this.selector1ChangeFn),this.selector1ChangeFn=function(e,t,i,n){var r,a={},o=[],c=n.target.value,u=t.querySelector("select.category-class");t._filters[t.hierarchyFilter.metaData[0].id]=c,l(t),t.utility.dispatchCustomEvent(t,t._events.FILTER_CHANGED,t._filters);for(var d=0,h=i.length;d<h;d++)if(i[d].code===c){r=i[d],o=r.children;break}r&&(e.selectedCategory=r,e.selectedClass=null,e.selectedType=null);for(var p,y=0;p=o[y++];){var b=p.code;b in a||(a[b]=1,s(u,p.code,p.description))}e.selector2ChangeFn&&u.removeEventListener("change",e.selector2ChangeFn),e.selector2ChangeFn=function(e,t,i,n,r){var l,a={},o=[],c=r.target.value,u=t.querySelector("select.category-type");t._filters[t.hierarchyFilter.metaData[1].id]=c,u.options.length=1,t._filters[t.hierarchyFilter.metaData[2].id]="",t.utility.dispatchCustomEvent(t,t._events.FILTER_CHANGED,t._filters);for(var d=0,h=i.length;d<h;d++)if(i[d].code===c){l=i[d],o=l.children;break}e.selectedClass=l,e.selectedType=null;for(var p,y=0;p=o[y++];){var b=p.code;b in a||(a[b]=1,s(u,p.code,p.description))}e.selector3ChangeFn&&u.removeEventListener("change",e.selector3ChangeFn),e.selector3ChangeFn=function(e,t,i,n,r,s){var l,a=s.target.value;t._filters[t.hierarchyFilter.metaData[2].id]=a;for(var o=0,c=i.length;o<c;o++)if(a===i[o].code){l=i[o];break}e.selectedType=l,t.utility.dispatchCustomEvent(t,t._events.FILTER_CHANGED,t._filters)}.bind(null,e,t,o,n,c),u.addEventListener("change",e.selector3ChangeFn)}.bind(null,e,t,o,c),u.addEventListener("change",e.selector2ChangeFn)}.bind(null,this,e,t),r.addEventListener("change",this.selector1ChangeFn)},i.applyFiltersRetained=function(e,t){let i=t[0]?t[0].code:void 0;e.querySelectorAll("select.classification option");if(i){e.querySelector("select.classification").value=i,e.querySelector("select.category").dispatchEvent(new CustomEvent("change",{detail:t[0]}));e.querySelectorAll("select.category-class option");e.querySelector("select.category-class").value=t[1]?t[1].code:"",e.querySelector("select.category-class").dispatchEvent(new CustomEvent("change",{detail:t[1]})),e.querySelector("select.category-type").value=t[2]?t[2].code:"",r(0,e),e.utility.disableSearch(e),e.hasFilters=!0,e.utility.callback(e,"filterCB",i,[t[0],t[1],t[2]]),e.utility.dispatchCustomEvent(e,e._events.FILTER_UPDATE,i,t[0],t[1],t[2])}},t}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(e){"use strict";function t(){}var i=t.prototype;return i.init=function(e,t,i){var n=this;n.shouldWaitForExpansion=i,e.dxTreeview?(e.utility.hideSpinner(e,e.assetHierarchySpinner,e.treeNode),e.dxTreeview.option("items",t.map(function(e){return e}))):$(function(){$(e).find(".asset-hierarchy-tree").dxTreeView({createChildren:function(e,t,i){var n=$.Deferred();return e.loadAssets(t,i,n),n.promise()}.bind(null,n,e),dataStructure:"plain",noDataText:function(e){var t=e._noDataText;t||(t="No results found");!t||t.toString().trim()&&"undefined"!==t.toString()&&"null"!==t.toString()&&"false"!==t.toString()&&"true"!==t.toString()||(t="No results found");return t}(e),keyExpr:"key",displayExpr:"name",hasItemsExpr:"hasChildren",expandedExpr:"isExpanded",disabledExpr:"isDisabled",parentIdExpr:"parentKey",rootValue:"-1",selectByClick:!0,selectionMode:"single",scrollDirection:e._scrollDirection&&"BOTH"===e._scrollDirection.toString().toUpperCase()?"both":"vertical",onItemSelectionChanged:n.selectionChanged.bind(null,e),onContentReady:n.onContentReady.bind(n,e),onItemClick:n.itemClick.bind(null,e),onItemExpanded:n.onItemExpanded.bind(null,e),onInitialized:function(e){!function(e){var t=$.Deferred();e.utility.callback(e,"filterConfig",t),t.done(function(t,i){i?(e.hierarchyFilter.applyMetaConfig(e,i),e.hierarchyFilter.getCategoryNames(e,t)):e.hierarchyFilter.loadClassification(e,t)})}(e)}.bind(null,e),itemTemplate:n.itemTemplateHandler.bind(e,e)})})},i.itemTemplateHandler=function(e,t,i,n){if(t&&t.isAlertMessage){var r="",s="";r=$("<span>").text(t.name).addClass("asset-item-text"),t.pathLabel&&(s=$("<span/>").addClass("asset-item-path").text(t.pathLabel)),t.hasChildren=!1,n.parent().addClass("dx-state-disabled alert-message-item"),n.attr("data-id",t.key).addClass("asset-item-content").append(r,s)}else{r=$("<span>").text(t.name).addClass("asset-item-text "+(e._enableMultiSelect?" has-selector":""));var l=$('<span class="spacer"></span>'),a=e._itemSelectorIcon?e._itemSelectorIcon:'<px-icon icon="px-utl:add"></px-icon>',o=$('<button class="btn btn-icon btn--bare asset-item-selector">'+a+"</button>");o.click(e.assetMultiSelection.bind(null,e,null,t));var c=void 0===t.canOpen||t.canOpen,u=e._enableMultiSelect&&!t.isDisabled&&c?o:"";s="";t.pathLabel&&(s=$("<span/>").addClass("asset-item-path").text(t.pathLabel)),n.attr("data-id",t.key).addClass("asset-item-content").append(r,l,u,s)}e.utility.dispatchCustomEvent(e,e._events.ITEM_PREPARED,{data:t,element:n})},i.loadAssets=function(e,t,i){var n=this;t?(null===e._selectedAsset&&(e._selectedAsset=t.itemData),e.pathToNavigate.length&&e.utility.showSpinner(e,e.assetHierarchySpinner,e.treeNode),e.utility.dispatchCustomEvent(e,e._events.EXPANDED,t.itemData,i),i.done(function(){e.expandedNodes.push(t.itemData),n.shouldWaitForExpansion&&e.utility.hideSpinner(e,e.assetHierarchySpinner),n.shouldWaitForExpansion=!1}),e.utility.callback(e,"itemExpandCB",t.itemData,i)):i.resolve(e.assets)},i.onItemExpanded=function(e){e.pathToNavigate.length?e.navigate(e.pathToNavigate):e.utility.hideSpinner(e,e.assetHierarchySpinner,e.treeNode)},i.onContentReady=function(e,t){e.dxTreeview=t.component,t&&t.element.find(".dx-scrollable").dxScrollable("instance").option("showScrollbar","always"),e.utility.dispatchCustomEvent(e,e._events.LOADED,e.dxTreeview),e.utility.callback(e,"loadDataCB",e.dxTreeview),this.shouldWaitForExpansion||!e.pathToNavigate.length&&e.utility.hideSpinner(e,e.assetHierarchySpinner,e.treeNode)},i.selectionChanged=function(e,t){return e._selectedAsset=t.itemData,e.selected=t.itemData.id||t.itemData.key,e.selectedAssetKey=t.itemData.id||t.itemData.key,e.isSelectionChange||t.node.selected?!(!e.isSelectionChange&&t.node.selected||e.isSelectionChange&&!t.node.selected)&&(e.utility.dispatchCustomEvent(e,e._events.SELECTED,t.itemData),void e.utility.dispatchCustomEvent(e,e._events.NAVIGATED,t.itemData)):(e.dxTreeview.selectItem(t.itemData.key||t.itemData.id),!1)},i.itemClick=function(e,t){e.isSelectionChange=(t.itemData.id||t.itemData.key)!=e.selected},t}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(e){var t=i(11),n=i(0),r=i(1),s=i(12),l=i(13),a=i(2);i(3),i(4);i(14);var o=Object.create(HTMLElement.prototype);o.createdCallback=function(){this.innerHTML=t,this.isGroup=!1,this.isDataLoaded=!1,this.rootAssets=null,this.propConfig=new r,this.attrConfig=new s(this),this.assetCache=new l,this.utility=new a,this.initializeView(),this.propConfig.addProperties(this,this.assetHierarchy),this.attrConfig.addAttributes(this)},o.attachedCallback=function(){this._enableMultiSelect=this.getAttribute("enableMultiSelect"),this._scrollDirection=this.getAttribute("scroll-direction"),this.assetHierarchy.enableMultiSelect=this._enableMultiSelect,this.assetHierarchy.scrollDirection=this._scrollDirection,this.utility.bindEvents(this)},o.attributeChangedCallback=function(e,t,i){return this.attrConfig&&this.attrConfig.handleAttributeChange(e,t,i)},o.detachedCallback=function(){this.utility.unbindEvents(this)},o.render=function(){},o.contextChanged=function(){this.assetSelection(this,null,self.assetCache.popParent())},o.selectAsset=function(e){if(!e)return console.error("Asset cannot be null or Asset not found in context"),!1;this.assetSelection(this,null,e)},o.getSelectedItemPath=function(){return this.assetHierarchy.getSelectedItemPath()},o.navigateHierarchy=function(e){return this.assetHierarchy.navigate(e)},o.selectItem=function(e){var t=this,i=t.assetHierarchy.selectedAsset&&t.assetHierarchy.selectedAsset.isExpanded,n="-1"===e.parentKey;i||n?(t.assetHierarchy.addItemToDatasource(e),t.assetHierarchy.selectItem(e.key)):(t.assetHierarchy.expandItem(e.parentKey),setTimeout(function(){t.assetHierarchy.selectItem(e.key)},4e3))},o.loadData=function(e){this.isDataLoaded=!0,this.assetHierarchy.assets=e,this.assetHierarchy.rootAssets=this.assetHierarchy.rootAssets?this.assetHierarchy.rootAssets:this.assetHierarchy.assets,this.assetHierarchy.assets.length>0&&0===this.assetCache.getParents().length&&function(e){e.assetCache.setParents({key:"-1",name:"Home"})}(this),this.utility.showSpinner(this,this.assetHierarchy.assetHierarchySpinner,this.assetHierarchy.treeNode),this.assetHierarchy.init(e)},o.loadGroupData=function(e){this.groupAssets=e,this.utility.loadGroup(this)},o.set=function(e,t){this[e]=t},o.assetSelection=function(e,t,i){e.isGroup?(!function(e){var t=e.assetGroup.querySelector(".list-group-item.active");null!==t&&t.classList.remove("active")}(e),t.classList.add("active"),e.utility.callback(e,"groupSelectionCB",i),e.assetGroupSpinner.classList.remove("hide")):(e.assetCache.setParents(i),e.utility.removeHierarchyList(e),e._selectedAsset=i,e.initialContext&&"Home"===i.name?e.loadData(e.initialContext):(e.utility.callback(e,"selectionCB","Home"===i.description||"Home"===i.name?null:i),e.utility.dispatchCustomEvent(e,"selected","Home"===i.description||"Home"===i.name?null:i),e.utility.showSpinner(e,e.assetHierarchy.assetHierarchySpinner,e.assetHierarchy.treeNode)))},o.initializeView=function(){this.assetHierarchy=this.querySelector("asset-hierarchy-control"),this.assetGroup=this.querySelector(".asset-group-explorer"),this.hierarchyTab=this.querySelector(".hierarchy-tab"),this.groupTab=this.querySelector(".group-tab"),this.assetGroupSpinner=this.querySelector(".asset-group-control .loadingSpinner"),this.groupFilter=this.assetGroup.querySelector(".filter-popup"),this.groupFilter.innerHTML=n},document.registerElement("asset-context",{prototype:o})}.call(t,i,t,e))||(e.exports=n)},function(e,t){e.exports='<section class="asset-hierarchy-control">\r\n    <div class="tool-bar">\r\n        <div class="search-box">\r\n            <input placeholder="Search" type="text" class="ahc-search-input text-input">\r\n            <px-icon class="ahc-search-icon icon-search" icon="px-nav:search"></px-icon>\r\n            <px-icon class="ahc-search-clear-icon icon-multiply hide" icon="px-nav:close"></px-icon>\r\n            <span class="ahc-search-error-msg">ENTER AT LEAST 3 CHARACTERS</span>\r\n        </div>\r\n        <div class="filter-box">\r\n            <div class="filter-trigger-container">\r\n                <button class="filter-trigger-btn actionable actionable--secondary">\r\n                    <px-icon class="filter-icon " icon="px-utl:filter"></px-icon>\r\n                    <span class="filter-txt label--inline" for="filter-icon">Filter</span>\r\n                </button>\r\n                <button class="ahc-filters-clear-btn pull-right hide">Clear</button>\r\n            </div>\r\n            <div class="uacb-filter-popup hide"></div>\r\n        </div>\r\n    </div>\r\n    <div class="loadingSpinner">\r\n        <px-spinner size="50"></px-spinner>\r\n    </div>\r\n    <div class="asset-hierarchy-tree"></div>\r\n</section>'},function(e,t){e.exports='<div>\r\n    \x3c!-- <div class="acms-header-panel">\r\n        <span>Asset Selector</span>\r\n    </div> --\x3e\r\n    <div class="acms-main-container">\r\n        <div class="acms-browser-panel">\r\n            <asset-context enableMultiSelect=true class=""></asset-context>\r\n        </div>\r\n        <div class="acms-selection-panel">\r\n            <span class="errorMsg"></span>\r\n            <ul class="acms-selection-list list-group">\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t,i){var n;void 0===(n=function(e){var t=i(9),n=i(10);i(5),i(16);var r={"btn-modal-positive":"Select","btn-modal-positive-disabled":"false","btn-modal-negative":"Cancel","modal-heading":"Select Context","trigger-btn-text":"Select Context","show-trigger-btn":"true",enableMultiSelect:"false","nodata-text":"","search-text":"Search","filter-text":"Filter","apply-btn-text":"Apply","clear-btn-text":"Clear"},s=Object.create(HTMLElement.prototype);function l(e,t){return e[t]}function a(e,t,i){return e[t]=i,e[t]}function o(e,t,i){return!!e._$assetContextEl&&(e._$assetContextEl[t]=i,e._$assetContextEl[t])}function c(e){var t=e._$modal;if(t.modalButtonClicked(),e._showAssetContextDialog=!0,e.pathToNavigate&&e.pathToNavigate.length&&e._$assetContextEl.selectedAsset&&e.pathToNavigate[e.pathToNavigate.length-1].key!==e._$assetContextEl.selectedAsset.key){var i=e.pathToNavigate.map(function(e){return e});i.unshift({}),e._$assetContextEl.navigateHierarchy(i),e.pathToNavigate=null}e._$assetContextEl&&e._$assetContextEl.assetHierarchy.scrollToSelectedItem(),p(e,e._events.OPENED,e.assetContext),u(e,t)}function u(e,t){t.classList.contains("asset-component-event")||setTimeout(function(){t.classList.add("asset-component-event"),t.addEventListener("btnModalPositiveClicked",e._handleBtnPositiveClick,!0),t.addEventListener("btnModalNegativeClicked",e._handleBtnNegativeClick,!0)},2e3)}function d(e,t){t&&(e._triggerBtnText=t,e._$modalTriggerBtn.querySelector("span").innerHTML=t)}function h(e,t){e._showTriggerBtn=t&&"true"===t.toString(),t&&"true"===t.toString()?(e._$modalTriggerBtn&&e._$modalTriggerBtn.classList.remove("hide"),e.querySelector(".selected-item-parent").classList.remove("hide")):(e._$modalTriggerBtn&&e._$modalTriggerBtn.classList.add("hide"),e.querySelector(".selected-item-parent").classList.add("hide"))}function p(e,t,i){var n={bubbles:!0,cancelable:!0};void 0!==i&&(n.detail=i);var r=new CustomEvent(t,n);e.dispatchEvent(r)}s.createdCallback=function(){var e=this;e._enableMultiSelect=this.getAttribute("enableMultiSelect"),"true"===e._enableMultiSelect?e.innerHTML=n:e.innerHTML=t,this._events={OPENED:"opened",CLOSED:"closed",POSITIVE_CLICKED:"positive-clicked",NEGATIVE_CLICKED:"negative-clicked"},this._$modal=this.querySelector("px-modal"),this._$modalTriggerBtn=this.querySelector(".asset-context-browser-btn"),this._selectedItem=null,this.pathToNavigate=null,this._itemOpenCB=null,this._canOpenCB=null,this._openedItemName=null,this._selectedItemParent=null,this._showAssetContextDialog=!1,this._btnModalPositiveText=null,this._triggerBtnText=null,this._showTriggerBtn=!0,this._btnModalNegativeText=null,this._btnModalPositiveDisabled=!1,this._modalHeading=null,this._noDataText=null,this._filterText=null,this._searchText=null,this._applyBtnText=null,this._clearBtnText=null,this._scrollDirection=null,this._noDataText=this.getAttribute("nodata-text"),this._filterText=this.getAttribute("filter-text"),this._searchText=this.getAttribute("search-text"),this._applyBtnText=this.getAttribute("apply-btn-text"),this._clearBtnText=this.getAttribute("clear-btn-text"),this._scrollDirection=this.getAttribute("scroll-direction"),this._handleBtnPositiveClick=function(e){e._showAssetContextDialog=!1,e.canOpenCB?e.canOpenCB(e._selectedItem)&&(e.itemOpenCB&&e.itemOpenCB(e._selectedItem)):e.itemOpenCB&&e.itemOpenCB(e._selectedItem);e.pathToNavigate=e.assetContext.getSelectedItemPath(),p(e,e._events.POSITIVE_CLICKED,e._selectedItem),p(e,e._events.CLOSED,e._selectedItem)}.bind(null,this),this._handleBtnNegativeClick=function(e){e._showAssetContextDialog=!1,p(e,e._events.NEGATIVE_CLICKED,e._selectedItem),p(e,e._events.CLOSED,e._selectedItem)}.bind(null,this),this._toggleAssetContextBrowser=c.bind(null,this),this._handleAssetSelectionChange=function(e,t){var i=t.detail;e._selectedItem=i;var n=e._$modal,r=void 0===i.canOpen||i.canOpen;n.btnModalPositiveDisabled=!i||!r}.bind(null,this),this._validatedAndEnableSelection=function(e,t){var i=t.detail;e._$modal.btnModalPositiveDisabled=!i}.bind(null,this),Object.defineProperty(e,"assetContext",{get:function(e){return e.querySelector("asset-context")}.bind(null,e)}),Object.defineProperty(e,"openedItemName",{get:function(e){return e._openedItemName}.bind(null,e),set:function(e,t){e._openedItemName=t,e.querySelector(".opened-item-name").innerHTML=t}.bind(null,e)}),Object.defineProperty(e,"selectedItemParent",{get:function(e){return e._selectedItemParent}.bind(null,e),set:function(e,t){e._selectedItemParent=t,e.querySelector(".selected-item-parent").innerHTML=t}.bind(null,e)}),Object.defineProperty(e,"btnModalPositiveText",{get:function(e){return e._btnModalPositiveText}.bind(null,e),set:function(e,t){t&&(e._btnModalPositiveText=t,e._$modal.setAttribute("btn-modal-positive",t))}.bind(null,e)}),Object.defineProperty(e,"btnModalNegativeText",{get:function(e){return e._btnModalNegativeText}.bind(null,e),set:function(e,t){t&&(e._btnModalNegativeText=t,e._$modal.setAttribute("btn-modal-negative",t))}.bind(null,e)}),Object.defineProperty(e,"btnModalPositiveDisabled",{get:function(e){return e._btnModalPositiveDisabled}.bind(null,e),set:function(e,t){e._btnModalPositiveDisabled=t,e._$modal.setAttribute("btn-modal-positive-disabled",t)}.bind(null,e)}),Object.defineProperty(e,"triggerBtnText",{get:function(e){return e._triggerBtnText}.bind(null,e),set:d.bind(null,e)}),Object.defineProperty(e,"showTriggerBtn",{set:h.bind(null,e)}),Object.defineProperty(e,"modalHeading",{get:function(e){return e._modalHeading}.bind(null,e),set:function(e,t){t&&(e._modalHeading=t,e._$modal.setAttribute("modal-heading",t))}.bind(null,e)}),Object.defineProperty(e,"showAssetContextDialog",{get:function(e){return e._showAssetContextDialog}.bind(null,e),set:function(e,t){var i=e._$modal;(e._showAssetContextDialog&&!t||!e._showAssetContextDialog&&t)&&(i.modalButtonClicked(),u(e,i),e._$assetContextEl&&e._$assetContextEl.assetHierarchy.scrollToSelectedItem());e._showAssetContextDialog=t}.bind(null,e)}),Object.defineProperty(e,"selectionLimit",{set:function(e,t){e.querySelector("asset-context-multi-selector").selectionLimit=t}.bind(null,this)}),Object.defineProperty(e,"noDataText",{get:l.bind(null,this,"_noDataText"),set:a.bind(null,this,"_noDataText")}),Object.defineProperty(e,"filterText",{get:l.bind(null,this,"_filterText"),set:a.bind(null,this,"_filterText")}),Object.defineProperty(e,"searchText",{get:l.bind(null,this,"_searchText"),set:a.bind(null,this,"_searchText")}),Object.defineProperty(e,"applyBtnText",{get:l.bind(null,this,"_applyBtnText"),set:a.bind(null,this,"_applyBtnText")}),Object.defineProperty(e,"clearBtnText",{get:l.bind(null,this,"_clearBtnText"),set:a.bind(null,this,"_clearBtnText")}),Object.defineProperty(e,"scrollDirection",{get:l.bind(null,this,"_scrollDirection"),set:a.bind(null,this,"_scrollDirection")}),Object.defineProperty(e,"toggleAssetContextDialog",{get:function(){return c.bind(null,e)}}),Object.defineProperty(e,"selectedAssets",{get:function(){return e.querySelector("asset-context-multi-selector").selectedAssets}}),Object.defineProperty(e,"selectItems",{get:function(){return function(e,t){var i=e.querySelector("asset-context-multi-selector");if(i)return i.selectItems(t);return!1}.bind(null,e)}}),Object.defineProperty(e,"updateSelection",{get:function(){return function(e,t){var i=e.querySelector("asset-context-multi-selector");if(i)return i.updateSelection(t);return!1}.bind(null,e)}}),this._showTriggerBtn=this.getAttribute("show-trigger-btn")||!0},s.set=function(e,t){this[e]=t},s.attachedCallback=function(){this._$assetContextEl=this.querySelector("asset-context"),this._$multiSelectorEl=this.querySelector("asset-context-multi-selector"),this._$assetContextEl.noDataText=this._noDataText,this._$assetContextEl.searchText=this._searchText,this._$assetContextEl.filterText=this._filterText,this._$assetContextEl.applyBtnText=this._applyBtnText,this._$assetContextEl.clearBtnText=this._clearBtnText,this._$assetContextEl.scrollDirection=this._scrollDirection,h(this,this._showTriggerBtn),this._$modalTriggerBtn.addEventListener("click",this._toggleAssetContextBrowser,!0),"true"!==this._enableMultiSelect&&this._$assetContextEl.addEventListener("selected",this._handleAssetSelectionChange,!0),"true"===this._enableMultiSelect&&this._$multiSelectorEl.addEventListener("selectionChange",this._validatedAndEnableSelection,!0)},s.attributeChangedCallback=function(e,t,i){switch(r[e]=i,e){case"btn-modal-negative":case"btn-modal-positive":this._$modal.setAttribute(e,i);case"btn-modal-positive-disabled":case"modal-heading":this._$modal.setAttribute(e,i);break;case"trigger-btn-text":d(this,i);break;case"show-trigger-btn":h(this,i);break;case"enableMultiSelect":this._enableMultiSelect=i;break;case"nodata-text":a(this,"_noDataText",i),o(this,"noDataText",i);break;case"filter-text":a(this,"_filterText",i),o(this,"filterText",i);break;case"search-text":a(this,"_searchText",i),o(this,"searchText",i);break;case"apply-btn-text":a(this,"_applyBtnText",i),o(this,"applyBtnText",i);break;case"clear-btn-text":a(this,"_clearBtnText",i),o(this,"clearBtnText",i)}},s.detachedCallback=function(){this._$modalTriggerBtn.removeEventListener("click",self._toggleAssetContextBrowser,!0),this._$assetContextEl&&this._$assetContextEl.removeEventListener("selected",self._handleAssetSelectionChange,!0),this._$multiSelectorEl&&this._$multiSelectorEl.removeEventListener("selectionChange",self._validatedAndEnableSelection,!0)},s.selectItem=function(e){this._$assetContextEl.selectItem(e),this.pathToNavigate=null},s.getParentItem=function(){var e=this.assetContext.getSelectedItemPath();return e.length>=2?e[e.length-2]:null},document.registerElement("asset-context-browser-dialog",{prototype:s})}.call(t,i,t,e))||(e.exports=n)},function(e,t){e.exports='<px-modal modal-id="asset-context-modal" btn-modal-positive="Select" btn-modal-negative="Cancel"\r\n    btn-modal-positive-disabled="false" modal-heading="Select Context">\r\n    <asset-context></asset-context>\r\n</px-modal>\r\n<div class="asset-context-browser-trigger-container">\r\n    <button class="btn btn-default btn--bare asset-context-browser-btn">\r\n        <span class="opened-item-name">Select Context</span>\r\n        <i class="fa fa-angle-down"></i>\r\n    </button>\r\n    <span class="selected-item-parent"></span>\r\n</div>'},function(e,t){e.exports='<px-modal modal-id="asset-context-modal"\r\n        btn-modal-positive="Open" \r\n        btn-modal-negative="Cancel"\r\n        btn-modal-positive-disabled="false"\r\n        modal-heading="Select Context">\r\n        <asset-context-multi-selector></asset-context-multi-selector>\r\n</px-modal>\r\n<button class="btn btn-default btn--bare asset-context-browser-btn multiselect">\r\n    <span class="opened-item-name">Multiple Assets Select</span>\r\n    <i class="fa fa-angle-down"></i>\r\n</button>\r\n<span class="selected-item-parent"></span>'},function(e,t){e.exports='<div class="asset-context-selection static">\r\n    <div class="navigation">\r\n        <ul class="nav nav-pills assetMenu pull-left">\r\n            <li class="hierarchy-tab active">\r\n                <a class="actionable actionable--select">Hierarchy</a>\r\n            </li>\r\n            <li class="group-tab">\r\n                <a class="actionable actionable--disabled">Group</a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <section class="block-group context-select">\r\n        <section class="asset-content">\r\n            <asset-hierarchy-control></asset-hierarchy-control>\r\n            <section class="asset-group-explorer hide">\r\n                <div class="tool-bar">\r\n                    <button type="button" class="btn btn-icon btn--bare search-btn" title="Search">\r\n                        <i class="icon-search"></i>\r\n                    </button>\r\n                    <button type="button" class="btn btn-icon btn--bare filter-btn" title="Filter">\r\n                        <i class="icon-collection-filter"></i>\r\n                    </button>\r\n                    <div class="filter-popup hide"></div>\r\n                </div>\r\n                <div class="search-box hide">\r\n                    <input type="text" />\r\n                    <i class="icon-multiply"></i>\r\n                </div>\r\n                <div class="loadingSpinner hide">\r\n                    <span id="assetGroupSpinner" class="pxh-spinner pxh-spinner--small style-scope attribute-data-table-cell"></span>\r\n                </div>\r\n            </section>\r\n        </section>\r\n    </section>\r\n\r\n</div>\r\n'},function(e,t,i){var n;void 0===(n=function(e){function t(e){e.selected=null,e.filter=null,e.search=null,e._enableMultiSelect=!1,e._showFilter=!0,e._showSearch=!0}function i(e,t,i){var n,r=e.getAttribute(t);r&&(n=i?!!r:r,e[t]=n)}return t.prototype.addAttributes=function(e){i(e,"selected"),i(e,"filter"),i(e,"search"),i(e,"enableMultiSelect"),i(e,"showFilter"),i(e,"showSearch")},t.prototype.handleAttributeChange=function(e,t,i){switch(e){case"selected":this.selected=i;break;case"filter":this.filter=i;break;case"search":this.search=i;break;case"enableMultiSelect":this._enableMultiSelect=i;break;case"showFilter":this._showFilter=i;break;case"showSearch":this._showSearch=i}},t}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(e){function t(){this._parents=[]}var i=t.prototype;return i.setParents=function(e){var t=!0;this._parents.forEach(function(i,n,r){i.key===e.key&&(t=!1,r.splice(n+1))}),t&&this._parents.push(e)},i.popParent=function(){return this._parents.length>2?(this._parents.pop(),this._parents.pop()):this._parents.length>1&&(this._parents.pop(),null)},i.getParents=function(){return this._parents},i.removeParents=function(){this._parents=[]},t}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(e){var t=i(15);document.registerElement("asset-hierarchy-control",t)}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n,r,s,l=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});n=[i,t,i(6),i(0),i(4),i(2),i(1),i(3)],void 0===(r=function(e,t){"use strict";var n=i(6),r=i(0),s=i(4),a=i(2),o=i(1),c=i(3);return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.createdCallback=function(){this.innerHTML=n,this._events={SELECTED:"selected",LOADED:"loaded",EXPANDED:"expanded",NAVIGATED:"navigated",MULTISELECTED:"multiSelected",ITEM_PREPARED:"itemPrepared",SEARCHED:"searched",SEARCH_CLEARED:"search-cleared",FILTER_OPENED:"filter-opened",FILTER_CLOSED:"filter-closed",FILTER_CHANGED:"filter-changed",FILTER_UPDATE:"filter-update",FILTER_CLEARED:"filter-cleared"},this.pathToNavigate=[],this.expandedNodes=[],this.treeView=new s,this.utility=new a,this.propConfig=new o,this.hierarchyFilter=new c,this.assetHierarchySpinner=this.querySelector(".asset-hierarchy-control .loadingSpinner"),this.hasSearch=!1,this.hasFilters=!1,this.treeNode=this.querySelector(".asset-hierarchy-tree"),this.hierarchyFilterView=this.querySelector(".uacb-filter-popup"),this.hierarchyFilterView.innerHTML=r,this.toolbarElem=this.querySelector(".tool-bar"),this.searchBox=this.querySelector(".search-box"),this.filterBox=this.querySelector(".filter-box"),this.propConfig.addProperties(this,this),this.pathKeyToLoad=null},t.prototype.attachedCallback=function(){this.hierarchyFilter.bindEvents(this)},t.prototype.attributeChangedCallback=function(){},t.prototype.detachedCallback=function(){this.hierarchyFilter.unbindEvents(this)},t.prototype.init=function(e,t){this.assets=e,this.utility.updateTexts(this),this.treeView.init(this,e,t)},t.prototype.getSelectedItemPath=function(){var e=[this._selectedAsset];return this._findParentInExpandedNodes(this._selectedAsset,e)},t.prototype._findParentInExpandedNodes=function(e,t){if(!e||!e.parentKey||e.parentKey&&"-1"===e.parentKey.toString())return t;for(var i=0,n=this.expandedNodes.length;i<n;i++)this.expandedNodes[i].key===e.parentKey&&(t.unshift(this.expandedNodes[i]),this._findParentInExpandedNodes(this.expandedNodes[i],t));return t},t.prototype.scrollToSelectedItem=function(){var e;this.dxTreeview&&(e=this.dxTreeview._scrollableContainer._$container[0].querySelector(".dx-state-selected"))&&this.dxTreeview._scrollableContainer.scrollToElement(e)},t.prototype.scrollToItemById=function(e){var t;this.dxTreeview&&(t=this.dxTreeview._scrollableContainer._$container[0].querySelector('[data-item-id="'+e+'"]'))&&this.dxTreeview._scrollableContainer.scrollToElement(t)},t.prototype.resetToRootItems=function(){this.dxTreeview&&this.dxTreeview.option("items",this.rootAssets||[])},t.prototype.addItemToDatasource=function(e){var t=this.dxTreeview.option("items");t.push(e),this.dxTreeview.option("items",t)},t.prototype.selectItem=function(e){this.dxTreeview&&this.dxTreeview.selectItem(e),this.scrollToSelectedItem()},t.prototype.expandItem=function(e){this.dxTreeview&&(this.dxTreeview.expandItem(e),this.scrollToItemById(e))},t.prototype.collapseItem=function(e){this.dxTreeview&&this.dxTreeview.collapseItem(e)},t.prototype.navigate=function(e){var t=e||[];if(t.shift(),this.pathToNavigate=t,!t.length)return!1;this.utility.showSpinner(this,this.assetHierarchySpinner,this.treeNode),setTimeout(this.handleTreeNavigationAction.bind(this,t,t[0].key),10)},t.prototype.handleTreeNavigationAction=function(e,t){try{1===e.length?(this.utility.hideSpinner(this,this.assetHierarchySpinner,this.treeNode),this.selectItem(t),this.pathToNavigate=[]):(this.collapseItem(t),this.expandItem(t))}catch(e){console.log(e)}},t.prototype.addToolbarButton=function(e){return this.filterBox.querySelector(".filter-trigger-container").insertBefore(e,this.filterBox.querySelector(".filter-trigger-container").childNodes[0]),e},t.prototype.addFilterPopupView=function(){this.hierarchyFilterView=this.querySelector(".uacb-filter-popup"),this.hierarchyFilterView.innerHTML=r},t.prototype.assetMultiSelection=function(e,t,i,n){n.stopPropagation(),e.utility.callback(e,"multiSelectionCB","Home"===i.description||"Home"===i.name?null:i),i.btnElement=n.currentTarget,e.utility.dispatchCustomEvent(e,e._events.MULTISELECTED,"Home"===i.description||"Home"===i.name?null:i)},t.prototype.handleEvents=function(){for(var e=this,t=Object.keys(e._events),i=0;i<t.length;i++)e.addEventListener(e._events[t[i]],function(t){return e.utility.dispatchCustomEvent.bind(null,e,t.type,t.detail)})},t.prototype.search=function(e){this.utility.serachRetainCallback(this,e)},t.prototype.filter=function(e){this.hierarchyFilter.applyFiltersRetained(this,e)},t}(HTMLElement)}.apply(t,n))||(e.exports=r)},function(e,t,i){var n;void 0===(n=function(e){i(5);var t=i(17);document.registerElement("asset-context-multi-selector",t)}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){var n,r,s,l=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});n=[i,t,i(7)],void 0===(r=function(e,t){"use strict";var n=i(7);function r(e,t,i){var n={bubbles:!0,cancelable:!0,detail:null};void 0!==i&&(n.detail=i);var r=new CustomEvent(t,n);e.dispatchEvent(r)}return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.createdCallback=function(){this.innerHTML=n,this.assetContextEL=this.querySelector("asset-context"),this.selectedListEL=this.querySelector(".acms-selection-panel ul.acms-selection-list"),this.selectedAssets=[],this.selectedAssetsKeys=[],this.selectedAssetsObj={},this.selectedAssetBtns={},this.selectionLimit=null,this._handlers={},this._handlers._handleMultiSelected=this._handleMultiSelected.bind(this,this),this._handlers._handleItemPrepared=this._handleItemPrepared.bind(this,this)},t.prototype.attachedCallback=function(){this.assetContextEL.addEventListener("multiSelected",this._handlers._handleMultiSelected),this.assetContextEL.addEventListener("itemPrepared",this._handlers._handleItemPrepared)},t.prototype.attributeChangedCallback=function(){},t.prototype.detachedCallback=function(){this.assetContextEL.removeEventListener("multiSelected",this._handlers._handleMultiSelected),this.assetContextEL.removeEventListener("itemPrepared",this._handlers._handleItemPrepared)},t.prototype._handleMultiSelected=function(e,t){e.validatedAndAddToSelected(e,t),r(e,"selectionChange",e.selectedAssets)},t.prototype._handleItemPrepared=function(e,t){var i,n=t.detail.data,r=t.detail.element;e.selectedAssetsObj[n.key]&&(i=r[0].querySelector(".asset-item-selector"),e.selectedAssetBtns[n.key]=i,i.classList.add("hide"))},t.prototype.updateSelection=function(e){return e=e||[],this.clearSelection(),this.selectItems(e),this.selectedAssets},t.prototype.selectItems=function(e){if(!e)return!1;for(var t=0;t<e.length;t++)this._validatedAndAddToSelected(this,e[t]);return r(this,"selectionChange",this.selectedAssets),this.selectedAssets},t.prototype.validatedAndAddToSelected=function(e,t){var i=t.detail;e._validatedAndAddToSelected(e,i)},t.prototype._validatedAndAddToSelected=function(e,t){!e.selectedAssetsObj[t.key]&&e.checkSelectionLimit(e,t)&&(e.selectedAssetsObj[t.key]=t,e.selectedAssetsKeys.push(t.key),e.selectedAssets.push(t),e.renderSelectedListItem(t))},t.prototype.renderSelectedListItem=function(e){var t=document.createElement("li");t.classList.add("list-group-item");var i=document.createElement("button");i.classList.add("btn","btn-icon","acms-list-item-del-btn","pull-right");var n=document.createElement("px-icon");n.setAttribute("icon","px-utl:close"),i.appendChild(n),i.addEventListener("click",this.removeSelectedAsset.bind(null,this,e,t));var r=document.createElement("span");r.textContent=e.name;var s=document.createElement("span");s.classList.add("spacer"),t.appendChild(r),t.appendChild(s),t.appendChild(i),this.selectedListEL.appendChild(t)},t.prototype.clearSelection=function(){this.selectedAssets=[],this.selectedAssetsObj=[],this.selectedListEL.innerHTML="",this.selectedAssetBtns=[],this.selectedAssetsKeys=[]},t.prototype.removeSelectedAsset=function(e,t,i,n){e.selectedAssets=e.arrayRemove(e.selectedAssets,t.key),delete e.selectedAssetsObj[t.key],e.selectedListEL.removeChild(i),e.selectedAssetBtns[t.key]&&e.selectedAssetBtns[t.key].classList.remove("hide"),e.querySelector(".errorMsg").innerHTML="",r(e,"selectionChange",e.selectedAssets)},t.prototype.maxAssetSelection=function(e){this.selectionLimit=e},t.prototype.arrayRemove=function(e,t){return e.filter(function(e){return e.key!==t})},t.prototype.checkSelectionLimit=function(e,t){return e.selectionLimit&&e.selectedAssets.length>=e.selectionLimit?(e.querySelector(".errorMsg").innerHTML="Selection is limited to "+e.selectionLimit+" items",!1):(t.btnElement&&(e.selectedAssetBtns[t.key]=t.btnElement,t.btnElement.classList.add("hide")),!0)},t}(HTMLElement)}.apply(t,n))||(e.exports=r)}]);