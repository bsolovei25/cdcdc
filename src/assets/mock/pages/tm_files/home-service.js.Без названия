/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(["require","exports","ramda","system/lang/ioc","bluebird","system/http/http-client","application/application-context","mi-assert","catalog/services/catalog-service","dashboard/services/dashboard-service","system/http/es6-ajax-request"],function(require,exports,a,b,c,d,e){"use strict";var f=require("catalog/services/catalog-service"),g=require("dashboard/services/dashboard-service"),h=require("system/http/es6-ajax-request"),i=require("mi-assert"),j="api/core/dashboards",k="api/core/userpref",l=2,m=function(){function b(a,b,c){this.httpClient=a,this.catalogService=b,this.dashboardService=c}return b.prototype.getHomePage=function(){return h.get(j+"/home",{}).send()},b.prototype.setHomePageToRoute=function(a){return e.homeRoute=a,h.post(n(),o(a),{}).send()},b.prototype.setHomePageToDashboard=function(a){return __awaiter(this,void 0,c,function(){var b;return __generator(this,function(d){switch(d.label){case 0:return[4,this.catalogService.getCatalogItem(a)];case 1:return b=d.sent(),
[2,c.resolve(this.dashboardService.setHomePage(b.path))]}})})},b.prototype.getHomePageIdentifier=function(){return __awaiter(this,void 0,c,function(){var b;return __generator(this,function(d){switch(d.label){case 0:return[4,this.httpClient.get(j+"/home")];case 1:return b=d.sent(),"#"===a.head(b)?[2,b]:[2,c.resolve(this.catalogService.getCatalogItemKey(b))]}})})},b}();m=__decorate([b.dependsOn(d.HttpClient,f,g)],m);function n(){return k+"/set"}function o(a){return i.isString(a,"route"),{userKey:q(),prefType:l,name:"home-dashboard",value:p(a)}}function p(b){return i.isString(b,"route"),"#"!==a.head(b)?"#"+b:b}function q(){return i.ok(e.user,""),e.user.key}return m});