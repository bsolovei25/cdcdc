/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("text!config/storage-config.json");function b(){this.dbConfig=null,this.version=0}b.factory=function c(d){var e=new b;if(e.dbConfig=JSON.parse(d||a),e.dbConfig.filter(function(a,b){return a.version!==b+1}).length>0)throw"IndexedDB versions definitions are out of order";return e.version=e.dbConfig[e.dbConfig.length-1].version,e},b.prototype.upgradeNeeded=function a(b){this.dbConfig.filter(c.bind(null,b)).forEach(d.bind(null,b))};function c(a,b){return 0x8000000000000000===a.oldVersion||a.oldVersion<b.version}function d(a,b){b.objectStores&&b.objectStores.forEach(e.bind(null,a)),b.indexes&&b.indexes.forEach(f.bind(null,a))}function e(a,b){"add"===b.action?a.target.result.createObjectStore(b.name,b.options):a.target.result.removeObjectStore(b.name)}function f(a,b){var c=a.target.transaction.objectStore(b.objectStore);"add"===b.action?c.createIndex(b.name,b.keyPath,b.options):c.deleteIndex(b.name)}return b});