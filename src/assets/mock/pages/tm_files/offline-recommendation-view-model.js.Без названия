/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(["require","exports","system/knockout/knockout-manager","rounds/data-collection/dto/rec-offline-dto","rounds/data-collection/dto/rec-offline-field-value-dto","knockout","lodash"],function(require,exports,a,b,c,d,e){"use strict";function f(a){for(var b=0;b<a.length;b++)"Date"===a[b].fieldType&&""===a[b].value&&(a[b].value=null);return a}var g=function(){function g(c){this.kom=new a,c||(c=new b.RecOfflineDTO),this.headline=this.kom.observable(c.headline),this.description=c.description,this.assetid=c.assetid,this.assetdescription=c.assetdescription,this.priority=c.priority,this.targetdate=c.targetdate,this.createworkrequest=c.createworkrequest,this.createdby=c.createdby,this.sourceMLorLRdescription=c.sourceMLorLRdescription,this.assetid=c.assetid,this.assetdescription=c.assetdescription,this.priority=c.priority,this.state=this.kom.observable(c.state),this.targetdate=c.targetdate,this.createworkrequest=c.createworkrequest,this.createdby=c.createdby,
this.creationDate=this.kom.observable(c.createdate),this.assignedto=c.assignedto,this.relatedMLKey=c.relatedMLKey,this.assetKey=c.assetKey,this.createdfromML=c.createdfromML,this.relatedRouteKey=c.relatedRouteKey,this.entityKey=c.entityKey,this.tracking=c.tracking,this.images=c.images||[],this.pendingChange=c.pendingChange,this.autoincrementkey=c.autoincrementkey,this.latitude=c.latitude,this.longitude=c.longitude,this.flId=c.flId,this.flDescription=c.flDescription,this.mandatorydate=c.mandatorydate,this.fields=c.fieldValues}return g.prototype.toDTO=function(){return{headline:d.unwrap(this.headline()),description:this.description,sourceMLorLRdescription:this.sourceMLorLRdescription,assetid:this.assetid,assetdescription:this.assetdescription,priority:this.priority,state:d.unwrap(this.state()),targetdate:this.targetdate,createworkrequest:this.createworkrequest,createdby:this.createdby,createdate:d.unwrap(this.creationDate()),assignedto:this.assignedto,relatedMLKey:this.relatedMLKey,
assetKey:this.assetKey,createdfromML:this.createdfromML,relatedRouteKey:this.relatedRouteKey,entityKey:this.entityKey,tracking:this.tracking,images:this.images,pendingChange:this.pendingChange,autoincrementkey:this.autoincrementkey,latitude:this.latitude,longitude:this.longitude,flId:this.flId,flDescription:this.flDescription,mandatorydate:this.mandatorydate,fieldValues:f(this.fields)}},g.prototype.updateViewElementsFromOfflineFields=function(a){this.headline(e.find(a,{fieldID:"MI_REC_SHORT_DESCR_CHR"}).value),this.creationDate(e.find(a,{fieldID:"MI_REC_CREAT_DATE_DT"}).value)},g.prototype.loadOfflineFields=function(a){this.fields=c.RecOfflineFieldValue.fromDataCollection(a),this.updateViewElementsFromOfflineFields(this.fields)},g.fromDataCollection=function(a){for(var b=[],c=0;c<a.length;c++)b[b.length]=new g(a[c]);return b},g.prototype.dispose=function(){this.kom.dispose()},g}();exports.OfflineRecommendationViewModel=g});