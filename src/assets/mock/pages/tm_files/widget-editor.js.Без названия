/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function a(require,exports,module){"use strict";var b=require("lodash"),c=require("jquery"),d=require("logging/error-notification-handler"),e=require("system/diagnostics/log-manager"),f=e.getLogger(module.id),g=require("spa/ko/managed-view-model"),h=require("../models/widget"),i=require("text!../views/widget-editor.html"),j=require("mi-assert");function k(a,b){l.call(this,b||i),this.widgetVM=a,this.widget=a.widget,this.backup={name:this.kom.observable()},this.errorNotificationHandler=Object.resolve(d)}var l=Object.inherit(g,k);k.prototype.load=function a(){Object.tryMethod(this,"beforeLoad"),n(this),Object.tryMethod(this,"afterLoad")},k.prototype.save=function a(){Object.tryMethod(this,"beforeSave"),this.widgetVM.save(),o(this),Object.tryMethod(this,"afterSave")},k.prototype.cancel=function a(){Object.tryMethod(this,"beforeCancel"),p(this),Object.tryMethod(this,"afterCancel")},k.prototype.onError=function a(b){f.error(b.stack),this.errorNotificationHandler.addError({
errorMessage:b.message,errorDetail:b.stack})},k.prototype.handleRequiredFields=function a(d){var e=this,f="input.form-control.disabled:eq(1)",g;b.defer(function(){g=c("button.btn.pull-right.btn-primary"),g.attr("disabled","true"),d.subscribe(m.bind(null,e,g,f)),d()?g.removeAttr("disabled"):c(f).css("border-color","red")})};function m(a,b,d){b.removeAttr("disabled"),c(d).css("border-color","#C0C5C5")}function n(a){q(a),r(a),a.backup.name(a.widget.name())}function o(a){q(a),a.backup.name(null)}function p(a){q(a),r(a),a.widget.name(a.backup.name())}function q(a){j.instanceOf(a,k,"self")}function r(a){j.instanceOf(a.widget,h,"self.widget")}return k});