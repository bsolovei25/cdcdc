/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(["require","exports","ui/elements/chart/models/base-chart","system/text/parser","ui/elements/chart/view-models/point-detail-view-model","spa/region","ramda","jquery","ui/elements/chart/chart-utilities"],function(require,exports,a,b,c,d,e,f){"use strict";var g=require("ui/elements/chart/chart-utilities"),h=e.curry(function a(b,e){if(b.renderTo.parentElement){var g=b.renderTo.parentElement.querySelector(".chart-detail-view");if(g){var h=new c(this.queryValues);g.style.display="block",h.attach(new d(f(g)))}}});return function(a){__extends(c,a);function c(b,c,d){var f=a.call(this,b,c,d)||this;return f.renderTo=b,f.truncateCat=e.curry(function a(b){var c=10,d=(this.value||"").toString();return d.length>c&&b.truncateLabels?d.substring(0,c)+" ...":this.value}),f}return c.prototype.configureOptions=function(){this.options.legend=this.formatBaseChartLegend(this.options.legend),this.options.plotOptions.column=this.barAndColumnConfiguration(),
this.options.plotOptions.bar=this.barAndColumnConfiguration(),this.options.xAxis.categories=this.convertCategoryArray(this.categoryArray),this.options.xAxis.labels.formatter=e.partial(this.truncateCat,[this.config]),this.options.plotOptions.series.colorByPoint=!0,this.options.plotOptions.series.point.events.click=h(this),this.options.xAxis.labels.step=this.config.xAxisStep||1},c.prototype.setYAxis=function(a){this.options.yAxis[this.options.yAxis.length]={type:this.calculateChartType(this.config.axis[a]),title:{text:this.config.axis[a].caption||this.config.axis[a].name},lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",labels:{enabled:!1},minorTickLength:0,tickLength:0}},c.prototype.formatChartData=function(){var b,c=(this.chartData||{}).length||-1;for(b=0;b<c;b++)this.convertPointValues(this.chartData[b].data);a.prototype.formatChartData.call(this)},c.prototype.barAndColumnConfiguration=function(){return{borderWidth:0,pointPadding:-1,animation:!1}},
c.prototype.convertPointValues=function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.x?c.x=this.getPointValue(c.x):""===c.x&&(c.x=null),c.z?c.z=this.getPointValue(c.z):""===c.z&&(c.z=null),c.y=100},c.prototype.getPointValue=function(a){var c=g.extractHyperlinkValue(a),d=b.parseFloat(c);return e.is(Date,c)?c:void 0!==d&&null!==d?isNaN(d)?null:Number(d):null},c.prototype.convertCategoryArray=function(a){var b,c=(a||{}).length;for(b=0;b<c;b++)a[b]=g.extractHyperlinkValue(a[b]);return a},c.prototype.formatBaseChartLegend=function(a){return a.layout="vertical",a.align="right",a.verticalAlign="top",a.floating=!1,a.maxHeight=250,a},c}(a)});