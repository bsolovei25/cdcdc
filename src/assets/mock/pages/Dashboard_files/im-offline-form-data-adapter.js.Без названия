/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("platform/offline-forms/layout/services/offline-form-data-dto"),b=require("platform/offline-forms/layout/adapters/offline-record-json-adapter"),c=require("system/lang/converter"),d=require("jquery");function e(){}return e.fromJson=function b(d){if(d){var e=new a;return e.familyKey=c.toString(d.familyKey),e.formKey=c.toString(d.formKey),e.familyId=d.familyID?c.toString(d.familyID):c.toString(d.familyId),e.familyCaption=c.toString(d.familyCaption),e.relationshipFamilyId=d.relationshipFamilyID?c.toNullableString(d.relationshipFamilyID):c.toNullableString(d.relationshipFamilyId),e.hasReferenceDocRelationship=c.toBoolean(d.hasReferenceDocRelationship),e.records=this.adaptRecords(d.records),e}},e.fromJsonCollection=function a(b){var c=[],d;if(!b)return c;for(d=0;d<b.length;d++)c.push(e.fromJson(b[d]));return c},e.adaptRecords=function a(c){if(!c)return{};for(var d=Object.keys(c),f={},g=0;g<d.length;g++){var h=c[d[g]],i=b.fromJson(h)
;i.syncStatus=h.syncStatus,i.errors=h.errors,i.relatedRecords=e.adaptRelatedRecords(h),i.edited=h.edited,i.pictureCount=h.pictureCount?h.pictureCount:0,i.additionalInfo=h.additionalInfo,f[i.clientId]=i}return f},e.adaptRelatedRecords=function a(b){var c=[];if(b.relatedRecords&&b.relatedRecords.length>0)for(var d=0;d<b.relatedRecords.length;d++){var f=e.fromJson(b.relatedRecords[d]);c.push(f)}return c},e});