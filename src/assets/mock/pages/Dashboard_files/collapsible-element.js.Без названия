/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require){"use strict";var a=require("jquery"),b=require("text!./template.html"),c=Object.resolve(require("system/globalization/translator")),d={};d.prototype=Object.create(HTMLElement.prototype),d.prototype.createdCallback=function(){var d=null,i=null,j=this,k="",l=!1,m=!1,n=null,o=c.translate("HIDE"),p=c.translate("SHOW");this.element=this,l=a(this.element).find("section.expanded").length>0,m=a(this.element).find("section.collapsed").length>0,l||m?(d=a(this.element).find("section.expanded").children().detach(),i=a(this.element).find("section.collapsed").children().detach()):d=a(this.element).children().detach(),this.element.innerHTML=b,a(this.element).find("section.expanded").append(d),m&&(a(this.element).find("section.collapsed").empty(),a(this.element).find("section.collapsed").append(i)),k=a(this.element).attr("caption"),this.private={caption:"",expanded:!0},Object.defineProperty(j,"caption",{get:function(){return j.private.caption}.bind(j),set:function(a){
e.call(null,j,a)}.bind(j)}),Object.defineProperty(j,"expanded",{get:function(){return j.private.expanded}.bind(j),set:function(a){f.call(null,j,a)}.bind(j)}),k&&(this.caption=k),a(this.element).find("i.icon-collapse").attr("title",o).on("click",g.bind(null,this)),a(this.element).find("i.icon-expand").attr("title",p).on("click",h.bind(null,this))},d.prototype.attachedCallback=function(){},d.prototype.detachedCallback=function(){},d.prototype.attributeChangedCallback=function(a,b,c){"caption"===a&&e.call(null,this,c)},d.prototype.show=function(){h(this)},d.prototype.hide=function(){g(this)};function e(a,b){a.private.caption!==b&&(a.private.caption=b,a.element.querySelector("section.collapsed span.title").innerHTML=b)}function f(a,b){a.private.expanded!==b&&(a.private.expanded=b,b===!0?h(a):b===!1&&g(a))}function g(b){j(b,!1)&&(a(b.element).find("section.expanded").removeClass("active"),a(b.element).find("section.collapsed").addClass("active"),b.private.expanded=!1,i(b))}function h(b){
j(b,!0)&&(a(b.element).find("section.collapsed").removeClass("active"),a(b.element).find("section.expanded").addClass("active"),b.private.expanded=!0,i(b))}function i(a){return a.dispatchEvent(new CustomEvent("change",{detail:{expanded:a.private.expanded}}))}function j(a,b){return a.changingEvent=new CustomEvent("changing",{detail:{expanding:b},cancelable:!0,bubbles:!0}),a.dispatchEvent(a.changingEvent)}return document.registerElement("mi-collapsible",{prototype:d.prototype}),d});