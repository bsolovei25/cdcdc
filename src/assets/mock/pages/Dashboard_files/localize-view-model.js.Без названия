/* Copyright Â© 1993-2019 Meridium, Inc. All rights reserved.  */
define(function(require,exports,module){"use strict";var a=require("jquery"),b=require("application/application-context"),c=require("../localize-dialog"),d=require("system/lang/event"),e=require("system/diagnostics/log-manager"),f=e.getLogger(module.id),g=require("mi-assert");function h(){this.type=Object.prop(),this.phrase=Object.prop(""),this.key=Object.prop(""),this.context=Object.prop(""),this.dialogClosed=Object.resolve(d)}h.prototype.localize=function(){var b;try{return b=a.Deferred(),c.show(parseInt(this.type(),10),this.phrase(),this.key(),this.context()).done(i.bind(null,this,b)).fail(b.reject.bind(b)),b.promise()}catch(a){k(a)}},h.prototype.dispose=function a(){try{this.dialogClosed&&(this.dialogClosed.remove(),this.dialogClosed=null)}catch(a){k(a)}},h.prototype.visible=function a(){return b.user.isSuperUser},h.prototype.disabled=function a(){return 0===this.phrase().length};function i(a,b,c){var d;try{j(a),g.isDeferred(b,"dfd"),g.stringNotEmpty(c,"phrase"),d={phrase:c},
a.dialogClosed.raise(a,d),b.resolve(d)}catch(a){k(a)}}function j(a){g.instanceOf(a,h,"self")}function k(a){throw f.error(a.stack),a}return h});